<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Atomic Structure and Design - consumerfinance.gov</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  <link href="../css/overrides.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Atomic Structure and Design";
    var mkdocs_page_input_path = "atomic-structure.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> consumerfinance.gov</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Introduction</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../installation/">Setup</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Running this Project</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../running-virtualenv/">Running in a Virtual Environment</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../running-docker/">Running in Docker</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../debugging-monitoring/">Debugging and Monitoring</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../deployment/">Artifacts and Deployment</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Pages and Components</span></p>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Atomic Structure and Design</a>
    <ul class="current">
    
        <ul>
        
            <li><a class="toctree-l4" href="#atoms">Atoms</a></li>
        
            <li><a class="toctree-l4" href="#molecules">Molecules</a></li>
        
            <li><a class="toctree-l4" href="#organisms">Organisms</a></li>
        
            <li><a class="toctree-l4" href="#folder-structure">Folder structure</a></li>
        
            <li><a class="toctree-l4" href="#javascript-architecture">JavaScript architecture</a></li>
        
            <li><a class="toctree-l4" href="#component-build-pipeline">Component build pipeline</a></li>
        
        </ul>
    

    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../editing-components/">Creating and Editing Components</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../debugging-templates/">Debugging Templates</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../migrations/">Django and Wagtail Migrations</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../forms-in-wagtail/">Forms in Wagtail Page Context</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../wagtail-pages/">Wagtail Pages</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Supporting Features</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../caching/">Caching</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../feature-flags/">Feature Flags</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../filterable-lists/">Filterable Lists</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../page-search/">Page Search</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../site-search/">Site Search</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../translation/">Translation</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Testing</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../javascript-unit-tests/">JavaScript Unit Testing</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../python-unit-tests/">Python Unit Testing</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../functional-testing/">Functional Testing</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../profiling-django/">Profiling Django</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../other-front-end-testing/">Other Front-end Testing</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Contributing</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../branching-merging/">Branching and Merging</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../contributing-docs/">Contributing to the Docs</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../related-projects/">Related Projects</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../development-tips/">Development Tips</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../github-actions/">How We Use GitHub Actions</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">APIs and Data</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../ask-cfpb/">Ask CFPB</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../consumer-complaint-database/">Consumer Complaints</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../housing-counselor-tool/">Find a Housing Counselor Tool</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../website-feedback/">Website Feedback</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">consumerfinance.gov</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Pages and Components &raquo;</li>
        
      
    
    <li>Atomic Structure and Design</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/cfpb/consumerfinance.gov/edit/master/docs/atomic-structure.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h1 id="notes-on-atomic-design">Notes on Atomic Design<a class="headerlink" href="#notes-on-atomic-design" title="Permanent link">¶</a></h1>
<p>Our components employ the concept of atomic design, meaning that
we break them down into atoms, molecules, and organisms,
each successive level being more complex than the previous.
(We do not currently use the template or page concepts as described in
<a href="http://bradfrost.com/blog/post/atomic-web-design/">Brad Frost's seminal article introducing atomic design</a>).</p>
<p>Our components are composed (on the front-end) of HTML, Less, and JavaScript.
If a component doesn’t have user interactions or require styling,
then it won’t have an associated JS and/or Less file.
Components that are available for adding to a Wagtail page also
require some Python programming—see the
<a href="../editing-components/">creating and editing components</a> page for details.</p>
<p>We compose our atomic components as follows:</p>
<h2 id="atoms">Atoms<a class="headerlink" href="#atoms" title="Permanent link">¶</a></h2>
<p>The smallest kind of component.
May not contain any other components.
Prefixed with <code>a-</code> in class names.</p>
<h3 id="html">HTML<a class="headerlink" href="#html" title="Permanent link">¶</a></h3>
<pre class="highlight"><code class="language-html">&lt;div class=&quot;a-tag&quot;&gt;
    Tag label {{ svg_icon('error') }}
&lt;/div&gt;</code></pre>

<h3 id="less">Less<a class="headerlink" href="#less" title="Permanent link">¶</a></h3>
<pre class="highlight"><code class="language-css">.a-tag {
    cursor: default;
    display: inline-block;
    padding: 5px 10px;
    …
}</code></pre>

<h3 id="javascript">JavaScript<a class="headerlink" href="#javascript" title="Permanent link">¶</a></h3>
<p>None of our atoms require any JavaScript at this time.</p>
<h2 id="molecules">Molecules<a class="headerlink" href="#molecules" title="Permanent link">¶</a></h2>
<p>The medium-sized component.
May contain atoms.
Prefixed with <code>m-</code> in class names.</p>
<h3 id="html_1">HTML<a class="headerlink" href="#html_1" title="Permanent link">¶</a></h3>
<pre class="highlight"><code class="language-html">&lt;div class=&quot;m-notification
            m-notification__visible
            m-notification__error&quot;
     data-js-hook=&quot;state_atomic_init&quot;&gt;
    {{ svg_icon('error') }}
    &lt;div class=&quot;m-notification_content&quot; role=&quot;alert&quot;&gt;
        &lt;div class=&quot;h4 m-notification_message&quot;&gt;Page not found.&lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;</code></pre>

<h3 id="less_1">Less<a class="headerlink" href="#less_1" title="Permanent link">¶</a></h3>
<pre class="highlight"><code class="language-css">.m-notification {
    display: none;
    position: relative;
    padding: @notification-padding__px;
    …
}</code></pre>

<h3 id="javascript_1">JavaScript<a class="headerlink" href="#javascript_1" title="Permanent link">¶</a></h3>
<pre class="highlight"><code class="language-js">function Notification( element ) {
  const BASE_CLASS = 'm-notification';

  // Constants for the state of this Notification.
  const SUCCESS = 'success';
  const WARNING = 'warning';
  const ERROR = 'error';

  // Constants for the Notification modifiers.
  const MODIFIER_VISIBLE = BASE_CLASS + '__visible';
  const _dom = atomicHelpers.checkDom( element, BASE_CLASS );
  const _contentDom = _dom.querySelector( '.' + BASE_CLASS + '_content' );
  …
}</code></pre>

<p>The Notification molecule can be instantiated
by adding the following to your project's JavaScript code:</p>
<pre class="highlight"><code class="language-js">const notification = new Notification( _dom );
notification.init();</code></pre>

<h2 id="organisms">Organisms<a class="headerlink" href="#organisms" title="Permanent link">¶</a></h2>
<p>The largest component.
May contain atoms, molecules, or
(if no other solution is viable) other organisms.
Prefixed with <code>o-</code> in class names.</p>
<h3 id="html_2">HTML<a class="headerlink" href="#html_2" title="Permanent link">¶</a></h3>
<pre class="highlight"><code class="language-html">&lt;div class=&quot;o-expandable
            o-expandable__borders
            o-expandable__midtone
            o-expandable__expanded&quot;
     data-js-hook=&quot;state_atomic_init&quot;&gt;
    &lt;button class=&quot;o-expandable_target&quot; aria-pressed=&quot;true&quot;&gt;
        &lt;div class=&quot;o-expandable_header&quot;&gt;
        …</code></pre>

<h3 id="less_2">Less<a class="headerlink" href="#less_2" title="Permanent link">¶</a></h3>
<pre class="highlight"><code class="language-css">.o-expandable {
    position: relative;

    &amp;_target {
        padding: 0;
        border: 0;
        …
    }
    …
}</code></pre>

<h3 id="javascript_2">JavaScript<a class="headerlink" href="#javascript_2" title="Permanent link">¶</a></h3>
<pre class="highlight"><code class="language-js"> function Expandable( element ) {
  const BASE_CLASS = 'o-expandable';

  // Bitwise flags for the state of this Expandable.
  const COLLAPSED = 0;
  const COLLAPSING = 1;
  const EXPANDING = 2;
  const EXPANDED = 3;

  // The Expandable element will directly be the Expandable
  // when used in an ExpandableGroup, otherwise it can be the parent container.
  const _dom = atomicHelpers.checkDom( element, BASE_CLASS );
  const _target = _dom.querySelector( '.' + BASE_CLASS + '_target' );
  const _content = _dom.querySelector( '.' + BASE_CLASS + '_content' );
  …
}</code></pre>

<p>The Expandable organism can be instantiated
by adding the following to your project's JavaScript code:</p>
<pre class="highlight"><code class="language-js">const expandable = new Expandable( _dom.querySelector( '.o-expandable' ) );
expandable.init( _expandable.EXPANDED );</code></pre>

<p>or</p>
<pre class="highlight"><code class="language-js">const atomicHelpers = require( '@cfpb/cfpb-atomic-component/src/utilities/atomic-helpers.js' );
const Expandable = require( '../../organisms/Expandable' );
atomicHelpers.instantiateAll( '.o-expandable', Expandable );</code></pre>

<h2 id="folder-structure">Folder structure<a class="headerlink" href="#folder-structure" title="Permanent link">¶</a></h2>
<p>Our atomic components are separated and named based on asset type.
HTML, Less, and JavaScript for each component are in separate directories.</p>
<h3 id="html_3">HTML<a class="headerlink" href="#html_3" title="Permanent link">¶</a></h3>
<pre class="highlight"><code>consumerfinance.gov/cfgov/jinja2/v1/_includes/atoms/
consumerfinance.gov/cfgov/jinja2/v1/_includes/molecules/
consumerfinance.gov/cfgov/jinja2/v1/_includes/organisms/</code></pre>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some of our foundational components get their Less and JavaScript
from the <a href="https://cfpb.github.io/design-system/">Design System</a>,
but the HTML for their Wagtail block templates
is stored in the above folders.</p>
</div>
<h3 id="css">CSS<a class="headerlink" href="#css" title="Permanent link">¶</a></h3>
<pre class="highlight"><code>consumerfinance.gov/cfgov/unprocessed/css/atoms/
consumerfinance.gov/cfgov/unprocessed/css/molecules/
consumerfinance.gov/cfgov/unprocessed/css/organisms/</code></pre>

<h3 id="javascript_3">JavaScript<a class="headerlink" href="#javascript_3" title="Permanent link">¶</a></h3>
<pre class="highlight"><code>consumerfinance.gov/cfgov/unprocessed/js/molecules/
consumerfinance.gov/cfgov/unprocessed/js/organisms/</code></pre>

<h3 id="tests">Tests<a class="headerlink" href="#tests" title="Permanent link">¶</a></h3>
<pre class="highlight"><code>consumerfinance.gov/test/unit_tests/js/molecules/
consumerfinance.gov/test/unit_tests/js/organisms/</code></pre>

<h2 id="javascript-architecture">JavaScript architecture<a class="headerlink" href="#javascript-architecture" title="Permanent link">¶</a></h2>
<p>JavaScript components are built to be rendered on the server
and then enhanced via JavaScript on the client.
The basic interface for the components is as follows:</p>
<pre class="highlight"><code class="language-js">function AtomicComponent( domElement ) {
    // Ensure the passed in Element is in the DOM.
    // Query and store references to sub-elements.
    // Instantiate child atomic components.
    // Bind necessary events for referenced DOM elements.
    // Perform other initialization related tasks.
    this.init = function init(){}

    // General teardown function
    // We don't remove the element from the DOM so
    // we need to unbind the events.
    this.destroy = function destroy(){}
}</code></pre>

<p>We generally favor composition over inheritance.
You can get more information by reading the following:</p>
<ul>
<li><a href="https://medium.com/javascript-scene/a-simple-challenge-to-classical-inheritance-fans-e78c2cf5eead#.mtrvhcjiw">A Simple Challenge to Classical Inheritance Fans</a></li>
<li><a href="https://www.youtube.com/watch?v=wfMtDGfHWpA">Composition over Inheritance (YouTube)</a></li>
</ul>
<h2 id="component-build-pipeline">Component build pipeline<a class="headerlink" href="#component-build-pipeline" title="Permanent link">¶</a></h2>
<h3 id="routes">Routes<a class="headerlink" href="#routes" title="Permanent link">¶</a></h3>
<p>Routes are used to serve JavaScript bundles to the browser based
on the requested URL or Wagtail page's <code>Media</code> definition.
This happens via code contained in
<a href="https://github.com/cfpb/consumerfinance.gov/blob/main/cfgov/jinja2/v1/_layouts/base.html#L85-L123"><code>base.html</code></a>. This file serves as the base HTML template for serving Wagtail pages.</p>
<h3 id="wagtail-page-media-class">Wagtail page <code>Media</code> class<a class="headerlink" href="#wagtail-page-media-class" title="Permanent link">¶</a></h3>
<p>Each atomic component has a <code>Media</code> class that lists the JavaScript files
that should be loaded via <code>base.html</code>.
When a page is requested via the browser, code contained in <code>base.html</code> will
loop all atomic components for the requested page and load
the appropriate atomic JavaScript bundles.</p>
<p>Here is an example of the <code>Media</code> class on a component,
<a href="https://github.com/cfpb/consumerfinance.gov/blob/main/cfgov/v1/atomic_elements/organisms.py#L223-L244">the <code>EmailSignUp</code> organism</a>:</p>
<pre class="highlight"><code class="language-python">class Media:
    js = ['email-signup.js']</code></pre>

<p>This will load the <code>email-signup.js</code> script on any page
that includes the <code>EmailSignUp</code> organism in one of its StreamFields.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../editing-components/" class="btn btn-neutral float-right" title="Creating and Editing Components">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../deployment/" class="btn btn-neutral" title="Artifacts and Deployment"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/cfpb/consumerfinance.gov/" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../deployment/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../editing-components/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
