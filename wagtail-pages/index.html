<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Wagtail Pages - consumerfinance.gov</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  <link href="../css/overrides.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Wagtail Pages";
    var mkdocs_page_input_path = "wagtail-pages.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> consumerfinance.gov</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Introduction</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../installation/">Setup</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Running this Project</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../running-virtualenv/">Running in a Virtual Environment</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../running-docker/">Running in Docker</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../debugging-monitoring/">Debugging and Monitoring</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../deployment/">Artifacts and Deployment</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Pages and Components</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../atomic-structure/">Atomic Structure and Design</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../editing-components/">Creating and Editing Components</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../debugging-templates/">Debugging Templates</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../migrations/">Django and Wagtail Migrations</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../forms-in-wagtail/">Forms in Wagtail Page Context</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Wagtail Pages</a>
    <ul class="current">
    
        <ul>
        
            <li><a class="toctree-l4" href="#fields">Fields</a></li>
        
            <li><a class="toctree-l4" href="#streamfields">StreamFields</a></li>
        
            <li><a class="toctree-l4" href="#panels">Panels</a></li>
        
            <li><a class="toctree-l4" href="#parent-child-page-relationships">Parent / child page relationships</a></li>
        
            <li><a class="toctree-l4" href="#template-rendering">Template rendering</a></li>
        
        </ul>
    

    </ul>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Supporting Features</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../caching/">Caching</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../feature-flags/">Feature Flags</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../filterable-lists/">Filterable Lists</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../page-search/">Page Search</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../site-search/">Site Search</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../translation/">Translation</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Testing</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../javascript-unit-tests/">JavaScript Unit Testing</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../python-unit-tests/">Python Unit Testing</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../functional-testing/">Functional Testing</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../profiling-django/">Profiling Django</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../other-front-end-testing/">Other Front-end Testing</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Contributing</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../branching-merging/">Branching and Merging</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../contributing-docs/">Contributing to the Docs</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../related-projects/">Related Projects</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../development-tips/">Development Tips</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../github-actions/">How We Use GitHub Actions</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">APIs and Data</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../ask-cfpb/">Ask CFPB</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../consumer-complaint-database/">Consumer Complaints</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../housing-counselor-tool/">Find a Housing Counselor Tool</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../website-feedback/">Website Feedback</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">consumerfinance.gov</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Pages and Components &raquo;</li>
        
      
    
    <li>Wagtail Pages</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/cfpb/consumerfinance.gov/edit/master/docs/wagtail-pages.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h1 id="wagtail-pages">Wagtail pages<a class="headerlink" href="#wagtail-pages" title="Permanent link">¶</a></h1>
<p><a href="http://docs.wagtail.io/en/stable/topics/pages.html">Wagtail pages</a> are 
<a href="https://docs.djangoproject.com/en/1.11/topics/db/models/">Django models</a> 
that are constructed of 
<a href="#fields">fields</a>, <a href="#streamfields">StreamFields</a>, and <a href="#panels">panels</a> 
that are rendered in a standard way. 
All CFPB Wagtail pages should inherit from the 
<a href="https://github.com/cfpb/consumerfinance.gov/blob/main/cfgov/v1/models/base.py"><code>v1.models.base.CFGOVPage</code> class</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Before creating a new Wagtail page type 
please consider whether one of our existing page types can meet your needs. 
Talk to the consumerfinance.gov product owners 
if your content is significantly different from anything else on the site 
or a specific maintenance efficiency will be gained from a new page type.</p>
</div>
<p>There are types of information defined on a new Wagtail page model: 
basic <a href="#fields">database fields</a> (like any Django model), 
specialized database fields called <a href="#streamfields">StreamFields</a> that allow for freeform page content, 
and <a href="#panels">editor panels</a> that present these fields to content editors. </p>
<h2 id="fields">Fields<a class="headerlink" href="#fields" title="Permanent link">¶</a></h2>
<p>Database fields in Wagtail pages work exactly the same as in 
<a href="https://docs.djangoproject.com/en/1.11/topics/db/models/#fields">Django models</a>, 
and Wagtail pages can use any <a href="https://docs.djangoproject.com/en/1.11/ref/models/fields/">Django model field</a>. </p>
<p>For example, our <code>BrowsePage</code> 
<a href="https://github.com/cfpb/consumerfinance.gov/blob/main/cfgov/v1/models/browse_page.py">includes a standard Django <code>BooleanField</code></a> 
that allows content editors to toggle secondary navigation sibling pages:</p>
<pre class="highlight"><code class="language-python">from django.db import models

from v1.models.base import CFGOVPage


class BrowsePage(CFGOVPage):
    secondary_nav_exclude_sibling_pages = models.BooleanField(default=False)</code></pre>

<h2 id="streamfields">StreamFields<a class="headerlink" href="#streamfields" title="Permanent link">¶</a></h2>
<p>StreamFields are special Django model fields provided by Wagtail for 
<a href="https://docs.wagtail.io/en/stable/topics/streamfield.html">freeform page content</a>. 
They allow a content editor to pick any number number of optional components
and place them in any order within their StreamField. 
In practice, this provides the flexibility of
<a href="https://torchbox.com/blog/rich-text-fields-and-faster-horses/">a large rich text field, with the structure of individual components</a>.</p>
<p>For example, our <code>LandingPage</code> page model 
<a href="https://github.com/cfpb/consumerfinance.gov/blob/main/cfgov/v1/models/landing_page.py">includes a <code>header</code> StreamField</a> 
that can have a hero and/or a text introduction:</p>
<pre class="highlight"><code class="language-python">from wagtail.core.fields import StreamField

from v1.atomic_elements import molecules
from v1.models import CFGOVPage


class LandingPage(CFGOVPage):

    header = StreamField([
        ('hero', molecules.Hero()),
        ('text_introduction', molecules.TextIntroduction()),
    ], blank=True)</code></pre>

<p>The specifics of StreamField block components can be found in 
<a href="https://cfpb.github.io/consumerfinance.gov/editing-components/">Creating and Editing Wagtail Components</a>.</p>
<h2 id="panels">Panels<a class="headerlink" href="#panels" title="Permanent link">¶</a></h2>
<p>Editor panels define how the page's <a href="#fields">fields</a> and <a href="#streamfields">StreamFields</a> will be organized for content editors;
they correspond to the tabs that appear across the top of the edit view for a page in the Wagtail admin.</p>
<p>The base Wagtail <code>Page</code> class and the <a href="https://github.com/cfpb/consumerfinance.gov/blob/main/cfgov/v1/models/base.py"><code>CFGOVPage</code> subclass of it</a> 
define specific sets of panels to which all fields should be added:</p>
<ul>
<li><code>content_panels</code>:
  For page body content.
  These fields appear on the "General Content" tab when editing a page. </li>
<li><code>sidefoot_panels</code>:
  For page sidebar or footer content.
  These fields appear on the "Sidebar" tab when editing a page. </li>
<li><code>settings_panels</code>:
  Page configuration such as the categories, tags, scheduled publishing, etc.
  Appears on the "Configuration" tab when editing a page. </li>
</ul>
<p>Most fields will simply require a <code>FieldPanel</code> to be added to one of the sets of panels above. 
StreamFields will require a <code>StreamFieldPanel</code>. 
See the <a href="https://docs.wagtail.io/en/stable/topics/pages.html#editor-panels">Wagtail documentation for additional, more complex panel options</a>.</p>
<p>For example, in our <code>BrowsePage</code> (used in the <a href="#fields">database fields example above</a>),
the <code>secondary_nav_exclude_sibling_pages</code> <code>BooleanField</code> 
<a href="https://github.com/cfpb/consumerfinance.gov/blob/main/cfgov/v1/models/browse_page.py">is added to the <code>sidefoot_panels</code> as a <code>FieldPanel</code></a>:</p>
<pre class="highlight"><code class="language-python">from django.db import models
from wagtail.admin.edit_handlers import FieldPanel

from v1.models.base import CFGOVPage


class BrowsePage(CFGOVPage):
    secondary_nav_exclude_sibling_pages = models.BooleanField(default=False)

    # …

    sidefoot_panels = CFGOVPage.sidefoot_panels + [
        FieldPanel('secondary_nav_exclude_sibling_pages'),
    ]</code></pre>

<p>Because <code>secondary_nav_exclude_sibling_pages</code> is a boolean field, 
this creates a checkbox on the "Sidebar/Footer" tab when editing a page.
Checking or unchecking that checkbox will set the value of <code>secondary_nav_exclude_sibling_pages</code> when the page is saved.</p>
<p>In our <code>LandingPage</code> (used in the <a href="#streamfields">StreamFields example above</a>), 
the <code>header</code> StreamField 
<a href="https://github.com/cfpb/consumerfinance.gov/blob/main/cfgov/v1/models/landing_page.py#L31">is added to the <code>content_panels</code> as a <code>StreamFieldPanel</code></a>:</p>
<pre class="highlight"><code class="language-python">from wagtail.admin.edit_handlers import StreamFieldPanel
from wagtail.core.fields import StreamField

from v1.atomic_elements import molecules
from v1.models import CFGOVPage


class LandingPage(CFGOVPage):
    header = StreamField([
        ('hero', molecules.Hero()),
        ('text_introduction', molecules.TextIntroduction()),
    ], blank=True)

    # …

    content_panels = CFGOVPage.content_panels + [
        StreamFieldPanel('header'),
        # …
    ]</code></pre>

<h2 id="parent-child-page-relationships">Parent / child page relationships<a class="headerlink" href="#parent-child-page-relationships" title="Permanent link">¶</a></h2>
<p>Wagtail provides two attributes to page models that enable 
<a href="https://docs.wagtail.io/en/stable/topics/pages.html#parent-page-subpage-type-rules">restricting the types of subpages or parent pages</a> 
a particular page model can have. On any page model:</p>
<ul>
<li><code>parent_page_types</code> limits which page types this type can be created under.</li>
<li><code>subpage_types</code> limits which page types can be created under this type.</li>
</ul>
<p>For example, in our <a href="https://github.com/cfpb/consumerfinance.gov/blob/main/cfgov/regulations3k/models/pages.py#L138">interactive regulations page models</a> 
we have a <code>RegulationLandingPage</code> that can be created anywhere in the page tree. 
<code>RegulationLandingPage</code>, however, can only have two types of pages created within it: 
<code>RegulationPage</code> and <code>RegulationSearchPage</code>. 
This parent/child relationship is expressed by setting <code>subpage_types</code> on <code>RegulationLandingPage</code>
and <code>parent_page_types</code> on <code>RegulationPage</code> and <code>RegulationSearchPage</code> 
to a model name in the form 'app_label.ModelName':</p>
<pre class="highlight"><code class="language-python">from v1.models import CFGOVPage


class RegulationLandingPage(CFGOVPage):
    subpage_types = ['regulations3k.RegulationPage', 'regulations3k.RegulationsSearchPage']


class RegulationsSearchPage(CFGOVPage):
    parent_page_types = ['regulations3k.RegulationLandingPage']
    subpage_types = []


class RegulationPage(CFGOVPage):
    parent_page_types = ['regulations3k.RegulationLandingPage']
    subpage_types = []</code></pre>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We prevent child pages from being added to <code>RegulationPage</code> and <code>RegulationSearchPage</code> 
by setting <code>subpage_types</code> to an empty list.</p>
</div>
<h2 id="template-rendering">Template rendering<a class="headerlink" href="#template-rendering" title="Permanent link">¶</a></h2>
<p>New Wagtail page types will usually need to make customizations to their base template 
<a href="https://docs.wagtail.io/en/stable/topics/pages.html#template-rendering">when rendering the page</a>.
This is done by overriding the <code>template</code> attribute on the page model.</p>
<p>For example, the <a href="https://github.com/cfpb/consumerfinance.gov/blob/main/cfgov/regulations3k/models/pages.py">interactive regulations landing page</a> 
includes a customized list of recently issued notices that gets loaded dynamically from the Federal Register. 
To do this it provides its own template that inherits from our base templates 
and overrides the <code>content_sidebar</code> block to include a separate <code>recent_notices</code> template:</p>
<pre class="highlight"><code class="language-python">from v1.models import CFGOVPage


class RegulationLandingPage(CFGOVPage):
    template = 'regulations3k/landing-page.html'</code></pre>

<p>And in <a href="https://github.com/cfpb/consumerfinance.gov/blob/main/cfgov/regulations3k/jinja2/regulations3k/landing-page.html"><code>regulations3k/landing-page.html</code></a>:</p>
<pre class="highlight"><code class="language-jinja2">{% extends 'layout-2-1-bleedbar.html' %}

{% import 'recent-notices.html' as recent_notices with context %}

{% block content_sidebar scoped -%}
    {{ recent_notices }}
{%- endblock %}</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../caching/" class="btn btn-neutral float-right" title="Caching">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../forms-in-wagtail/" class="btn btn-neutral" title="Forms in Wagtail Page Context"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/cfpb/consumerfinance.gov/" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../forms-in-wagtail/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../caching/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
