/* ==========================================================================
   cfgov-refresh
   meta
   ========================================================================== */


/* topdoc
  name: Tags
  family: cfgov-meta
  patterns:
    - name: Default example
      markup: |
        <div class="tags">
            <h4 class="tags_header">Topics:</h4>
            <ul class="tags_list">
                <li class="tags_tag">
                    <a href="#" class="tags_link">
                        <span class="tags_bullet" aria-hidden="true">&bull;</span>
                        Students
                    </a>
                </li>
                <li class="tags_tag">
                    <a href="#" class="tags_link">
                        <span class="tags_bullet" aria-hidden="true">&bull;</span>
                        Consumers
                    </a>
                </li>
                <li class="tags_tag">
                    <a href="#" class="tags_link">
                        <span class="tags_bullet" aria-hidden="true">&bull;</span>
                        College loans
                    </a>
                </li>
                <li class="tags_tag">
                    <a href="#" class="tags_link">
                        <span class="tags_bullet" aria-hidden="true">&bull;</span>
                        Students
                    </a>
                </li>
                <li class="tags_tag">
                    <a href="#" class="tags_link">
                        <span class="tags_bullet" aria-hidden="true">&bull;</span>
                        Consumers
                    </a>
                </li>
                <li class="tags_tag">
                    <a href="#" class="tags_link">
                        <span class="tags_bullet" aria-hidden="true">&bull;</span>
                        College loans
                    </a>
                </li>
                <li class="tags_tag">
                    <a href="#" class="tags_link">
                        <span class="tags_bullet" aria-hidden="true">&bull;</span>
                        Students
                    </a>
                </li>
                <li class="tags_tag">
                    <a href="#" class="tags_link">
                        <span class="tags_bullet" aria-hidden="true">&bull;</span>
                        Consumers
                    </a>
                </li>
                <li class="tags_tag">
                    <a href="#" class="tags_link">
                        <span class="tags_bullet" aria-hidden="true">&bull;</span>
                        College loans
                    </a>
                </li>
            </ul>
        </div>
    - name: Hide header modifier
      markup: |
        <div class="tags tags__hide-header">
            <h4 class="tags_header u-visually-hidden">Topics:</h4>
            <ul class="tags_list">
                <li class="tags_tag">
                    <a href="#" class="tags_link">
                        <span class="tags_bullet" aria-hidden="true">&bull;</span>
                        Students
                    </a>
                </li>
                <li class="tags_tag">
                    <a href="#" class="tags_link">
                        <span class="tags_bullet" aria-hidden="true">&bull;</span>
                        Consumers
                    </a>
                </li>
                <li class="tags_tag">
                    <a href="#" class="tags_link">
                        <span class="tags_bullet" aria-hidden="true">&bull;</span>
                        College loans
                    </a>
                </li>
                <li class="tags_tag">
                    <a href="#" class="tags_link">
                        <span class="tags_bullet" aria-hidden="true">&bull;</span>
                        Students
                    </a>
                </li>
                <li class="tags_tag">
                    <a href="#" class="tags_link">
                        <span class="tags_bullet" aria-hidden="true">&bull;</span>
                        Consumers
                    </a>
                </li>
                <li class="tags_tag">
                    <a href="#" class="tags_link">
                        <span class="tags_bullet" aria-hidden="true">&bull;</span>
                        College loans
                    </a>
                </li>
                <li class="tags_tag">
                    <a href="#" class="tags_link">
                        <span class="tags_bullet" aria-hidden="true">&bull;</span>
                        Students
                    </a>
                </li>
                <li class="tags_tag">
                    <a href="#" class="tags_link">
                        <span class="tags_bullet" aria-hidden="true">&bull;</span>
                        Consumers
                    </a>
                </li>
                <li class="tags_tag">
                    <a href="#" class="tags_link">
                        <span class="tags_bullet" aria-hidden="true">&bull;</span>
                        College loans
                    </a>
                </li>
            </ul>
        </div>
    - name: Block list modifier 
      markup: | 
        <div class="tags tags__block-list">
            <h4 class="tags_header">Topics:</h4>
            <ul class="tags_list">
                <li class="tags_tag">
                    <a href="#" class="tags_link">
                        <span class="tags_bullet" aria-hidden="true">&bull;</span>
                        Students
                    </a>
                </li>
                <li class="tags_tag">
                    <a href="#" class="tags_link">
                        <span class="tags_bullet" aria-hidden="true">&bull;</span>
                        Consumers
                    </a>
                </li>
                <li class="tags_tag">
                    <a href="#" class="tags_link">
                        <span class="tags_bullet" aria-hidden="true">&bull;</span>
                        College loans
                    </a>
                </li>
                <li class="tags_tag">
                    <a href="#" class="tags_link">
                        <span class="tags_bullet" aria-hidden="true">&bull;</span>
                        Students
                    </a>
                </li>
                <li class="tags_tag">
                    <a href="#" class="tags_link">
                        <span class="tags_bullet" aria-hidden="true">&bull;</span>
                        Consumers
                    </a>
                </li>
                <li class="tags_tag">
                    <a href="#" class="tags_link">
                        <span class="tags_bullet" aria-hidden="true">&bull;</span>
                        College loans
                    </a>
                </li>
                <li class="tags_tag">
                    <a href="#" class="tags_link">
                        <span class="tags_bullet" aria-hidden="true">&bull;</span>
                        Students
                    </a>
                </li>
                <li class="tags_tag">
                    <a href="#" class="tags_link">
                        <span class="tags_bullet" aria-hidden="true">&bull;</span>
                        Consumers
                    </a>
                </li>
                <li class="tags_tag">
                    <a href="#" class="tags_link">
                        <span class="tags_bullet" aria-hidden="true">&bull;</span>
                        College loans
                    </a>
                </li>
            </ul>
        </div>  
  tags:
    - cfgov-meta
*/

.tags {
    @bp: 480px;

    .respond-to-min(@bp, {
        position: relative;
        // 58px here comes from the .tags_header width.
        padding-left: unit((58px + 8px) / @base-font-size-px, em);
    });

    &_header {
        .h4();
        // Bottom margin is eyeballed to 20px from the baseline.
        margin: 0 0 unit(16px / @font-size, em);
        color: @black;

        .respond-to-min(@bp, {
            position: absolute;
            left: 0;
            width: unit(58px / @font-size, em);
            margin: 0;
        });
    }

    &_list {
        padding-left: 0;
        border-top: 1px dotted @gold-80;
        list-style-type: none;

        .respond-to-min(@bp, {
            border-top: none;
        });
    }

    &_tag {
        border-bottom: 1px dotted @gold-80;
        line-height: 1;

        .respond-to-min(@bp, {
            .u-inline-block();
            margin-right: unit(15px / @base-font-size-px, em);
            // Eyeballed to be 15px of vertical space between each.
            margin-bottom: unit(8px / @base-font-size-px, em);
            border-bottom: none;
        });
    }

    @bullet-font-size: 17px;

    &_link {
        position: relative;
        .h6();
        display: block;
        // Eyeballed to 15px including line height.
        padding: 12px 0 8px;
        margin: 0 0 0 unit(@bullet-font-size / @font-size, em);
        // Match the height of the bullet.
        line-height: unit(@bullet-font-size / @font-size, em);

        .u-link__colors(@gray, @gray, @gray, @gray, @gray,
                        @gold-80, @gold-80, @gold-80, @gold-80, @gold-80);

        .respond-to-max((@bp - 1), {
            .u-link__no-border();
        });

        .respond-to-min(@bp, {
            padding: 0;
        });
    }
    
    &_bullet {
        position: absolute;
        left: -1em;
        .lt-ie8 & {
            top: 4px;
        }
        // Display block + width makes this whole area clickable.
        display: block;
        width: 1em;
        color: @gold-80;
        // 12px is the font size of .tags_link
        font-size: unit(@bullet-font-size / 12px, em);
    }

    &__block-list {
        padding-left: 0;

        .tags_tag {
            display: list-item;
        }

        .tags_header {
            .h4();
            // Bottom margin is eyeballed to 20px from the baseline.
            margin: 0 0 unit(16px / @font-size, em);
            color: @black;
            position: relative;
        }
    }

    &__hide-header {
        padding-left: 0;

        .tags_header{
            margin: 0;
        }
    }
    
    &__hide-header&__block-list {
        .tags_header {
            margin: 0;
        }
    }
}


/* topdoc
  name: Date
  family: cfgov-meta
  patterns:
    - name: Default date
      markup: |
        <span class="date">
            Nov 4, 2013
        </span>
  tags:
    - cfgov-meta
*/

.date {
    .h5();
    color: @gray;
    white-space: nowrap;
}


/* topdoc
  name: Category slug
  family: cfgov-meta
  patterns:
    - name: Default category slug
      markup: |
        <a href="#" class="category-slug">
            <span class="category-slug_icon cf-icon cf-icon-dialogue"></span>
            <span class="u-visually-hidden">Category:</span>
            Consumer finance
        </a>
      codenotes:
        - |
          Structural cheat sheet:
          -----------------------
          .category-slug
            .category-slug_icon
            .u-visually-hidden
      notes:
        - "We suggest using a .u-visually-hidden element to add more context for
          screen readers."
  tags:
    - cfgov-meta
*/

.category-slug {
    .h4();
    display: inline-block;
    // Eyeballed to 20px over h2.
    margin-bottom: unit(8px / @font-size, em);
    color: @black;

    a& {
        .u-link__colors(@black, @pacific-80);
    }

    &_icon {
        margin-right: unit(2px / @font-size, em);
    }
}


/* topdoc
  name: Header slug
  family: cfgov-meta
  patterns:
    - name: Default header slug
      markup: |
        <h2 class="header-slug">
            <span class="header-slug_inner">
                Blog summary
            </span>
        </h2>
      codenotes:
        - |
          Structural cheat sheet:
          -----------------------
          .header-slug
            .header-slug_inner
  tags:
    - cfgov-meta
*/

.header-slug {
    .h5();
    margin-bottom: unit(17px / @font-size, em);
    border-top: 1px solid @gray-20;

    &_inner {
        display: inline-block;
        padding-top: unit(4px / @font-size, em);
        margin-top: -3px;
        border-top: 5px solid @green;
    }
}


/* topdoc
  name: Padded header
  family: cfgov-meta
  patterns:
    - name: Default padded header
      markup: |
        <h2 class="padded-header">
            Header
        </h2>
      codenotes:
        - .padded-header
  tags:
    - cfgov-meta
*/

.padded-header {
    .h5();
    // 8px top padding to account for line-height.
    padding: unit(8px / @font-size, em)
             unit(10px / @font-size, em);
    margin-bottom: 0;
    border-bottom: 1px solid @gray-50;
    background: @gray-10;
    color: @darkgray;
}


/* topdoc
  name: Fancy slug
  family: cfgov-meta
  patterns:
    - name: Default fancy slug
      markup: |
        <h2 class="fancy-slug">
            <span class="fancy-slug_text">
                <span class="fancy-slug_ribbon-left"></span>
                Watchroom
                <span class="fancy-slug_ribbon-right"></span>
            </span>
        </h2>
      codenotes:
        - |
          Structural cheat sheet:
          -----------------------
          .fancy-slug
            .fancy-slug_text
                .fancy-slug_ribbon-left
                .fancy-slug_ribbon-right
  tags:
    - cfgov-meta
*/

.fancy-slug {
    @v-padding: 8px;
    @ribbon-width: 17px;
    @ribbon-angle: 33deg;

    .h5();
    position: relative;
    // Cut the height in half since we will be adding it back with margin.
    height: unit(((@font-size / 2) + @v-padding + 1) / @font-size, em);
    padding: 0 unit(@ribbon-width / @font-size, em);
    // Add back half of the height to create a space for the text to pull
    // itself up into.
    margin-top: unit(((@font-size / 2) + @v-padding + 1) / @font-size, em);
    // Bottom margin is eyeballed to 15px when considering baseline and line-height.
    margin-bottom: unit(8px / @font-size, em);
    border-top: 1px solid @gray-50;
    line-height: 1;
    text-align: center;

    &_text {
        display: inline-block;
        position: relative;
        // Pull the text up up by half of its height so that it is vertically
        // centered with .fancy-slugs top border. "Height" means half the
        // font-size plus half the total padding and half the borders.
        top: unit(((@font-size / 2) + @v-padding + 1) * -1 / @font-size, em);
        padding: unit(@v-padding / @font-size, em) unit(20px / @font-size, em);
        border: 1px solid @gray-50;
        background: @white;
    }

    // Use :before as the top corner and :after as the bottom corner.
    &_ribbon-left,
    &_ribbon-right {
        display: block;
        position: absolute;
        top: -1px;
        width: unit(@ribbon-width / @font-size, em);
        height: 100%;
        border-top: 1px solid @gray-50;
        border-bottom: 1px solid @gray-50;

        .lt-ie9 & {
            display: none;
        }

        &:before,
        &:after {
                display: block;
                content: "";
                position: absolute;
                z-index: 3;
                width: unit(@ribbon-width / @font-size, em);
                height: 50%;
                background: @white;
                border: 0 solid @gray-50;
        }
    }

    &_ribbon-left {
        left: unit(-@ribbon-width / @font-size, em);
        &:before {
            top: 0;
            border-left-width: 1px;
            transform-origin: 0 0;
            transform: skewX(@ribbon-angle);
        }
        &:after {
            bottom: 0;
            border-left-width: 1px;
            transform-origin: 0 100%;
            transform: skewX(-@ribbon-angle);
        }
    }

    &_ribbon-right {
        right: unit(-@ribbon-width / @font-size, em);
        &:before {
            top: 0;
            right: 0;
            border-right-width: 1px;
            transform-origin: 100% 0;
            transform:  skewX(-@ribbon-angle);
        }
        &:after {
            right: 0;
            bottom: 0;
            border-right-width: 1px;
            transform-origin: 100% 100%;
            transform:  skewX(@ribbon-angle);
        }
    }
}


/* topdoc
  name: Meta header
  family: cfgov-meta
  patterns:
    - name: Default meta header
      markup: |
        <div class="meta-header">
            <span class="meta-header_right date">
                Nov 4, 2013
            </span>
            <a href="#" class="meta-header_left category-slug">
                <span class="cf-icon cf-icon-credit-card"></span>
                Consumer finance
            </a>
        </div>
      codenotes:
        - |
          Structural cheat sheet:
          -----------------------
          .meta-header
            .meta-header_right
            .meta-header_left
      notes:
        - ".meta-header_right should come first in the markup so that when it
          floats to the right it will appear on the same line as .meta-header_left."
        - "Note that the example shows .meta-header_left using the
          .category-slug pattern and .meta-header_right using the .date pattern
          but you could use other patterns in place of them. Or you can even
          swap them so that date is attached to .meta-header_left and
          .category-slug is attacked to .meta-header_right."
    - name: Alternate meta header arrangements
      markup: |
        <div class="meta-header">
            <a href="#" class="meta-header_right category-slug">
                <span class="cf-icon cf-icon-credit-card"></span>
            </a>
            <span class="meta-header_left date">
                Nov 4, 2013
            </span>
        </div>
        <br>
        <div class="meta-header">
            <a href="#" class="meta-header_left category-slug">
                <span class="cf-icon cf-icon-credit-card"></span>
                Consumer finance
            </a>
        </div>
      notes:
        - "Just some random variations to show off what you could do."
  tags:
    - cfgov-meta
*/

.meta-header {
    padding-bottom: unit(8px / @base-font-size-px, em);
    margin-bottom: unit(10px / @base-font-size-px, em);
    border-bottom: 1px solid @gray-50;
}

.meta-header_left {
    margin-bottom: 0;
}

.meta-header_right {
    display: block;
    margin-bottom: 0;
    .respond-to-min(600px, {
        .u-right();
        display: inline-block;
    });
}


/* topdoc
  name: EOF
  eof: true
*/
