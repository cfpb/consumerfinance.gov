{# Based on https://github.com/django/django/blob/2.2.24/django/forms/templates/django/forms/widgets/multiple_input.html #}
{# This template will be nested in a <p> element, because Django emits #}
{# invalid HTML out of the box, but the practical implication is you #}
{# must start with a block-level element to break out of the P. #}

{% if opts_list %}
<ul class="tdp-survey__sub-opts">{% for option in opts_list %}
    <li>{{ option }}</li>{% endfor %}
</ul>
{% endif %}

{% with id=widget.attrs.id %}<ul{% if id %} id="{{ id }}"{% endif %}{% if widget.attrs.class %} class="{{ widget.attrs.class }}"{% endif %}>{% for group, options, index in widget.optgroups %}{% if group %}
  <li>{{ group }} <ul{% if id %} id="{{ id }}_{{ index }}"{% endif %}>{% endif %}{% for option in options %}
    <li>{% include option.template_name with widget=option %}</li>{% endfor %}{% if group %}
  </ul></li>{% endif %}{% endfor %}
</ul>{% endwith %}
