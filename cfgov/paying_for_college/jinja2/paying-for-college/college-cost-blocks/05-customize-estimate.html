{% import "v1/includes/atoms/checkbox.html" as checkbox with context %}

<section class="college-costs__tool-section college-costs__tool-section--make-a-plan" data-tool-section="customize-estimate">
    <h2 tabindex="-1">Customize your estimate</h2>

    <p>This page will let you customize your estimate and help you determine whether you can cover the cost of attending this particular school.</p>


    <h3>Enter information from your financial aid offer</h3>
    <p>Type in the costs listed in your financial aid offer, adding additional costs as needed. Remember, these are estimates based on students’ reported spending.</p>
    <div class="block block--mid">
        <div class="financial-item-group">
            {% set flyout_settings = {
                'label': 'Costs',
                'value': '$0',
                'is_editable': 'True', 
                'status': 'warning',
                'note': 'Type in the costs listed in your financial aid offer, adding additional costs as needed. Remember, these are estimates based on students’ reported spending.',
                'data_attribute': 'data-financial-item="total_costs"'
            } %}
            {% call() flyout(flyout_settings) %}
                {{
                    input.render({
                        'label': 'Tuition and fees',
                        'id': 'plan__tuition',
                        'value': '0',
                        'data_attribute': 'data-financial-item="dirCost_tuition"'
                    })
                }}
                {{
                    input.render({
                        'label': 'Housing and meals',
                        'id': 'plan__room-board',
                        'value': '0',
                        'data_attribute': 'data-financial-item="dirCost_housing"'
                    })
                }}
                {{
                    input.render({
                        'label': 'Other costs the school will bill you for',
                        'id': 'plan__otherDirectCosts',
                        'value': '0',
                        'data_attribute': 'data-financial-item="dirCost_other"'
                    })
                }}
                {{
                    input.render({
                        'label': 'Books and supplies',
                        'id': 'plan__books',
                        'value': '0',
                        'data_attribute': 'data-financial-item="indiCost_books"'
                    })
                }}
                {{
                    input.render({
                        'label': 'Transportation',
                        'id': 'plan__transportation',
                        'value': '0',
                        'data_attribute': 'data-financial-item="indiCost_transportation"'
                    })
                }}
                {{
                    input.render({
                        'label': 'Personal/other/miscellaneous expenses',
                        'id': 'plan__other',
                        'value': '0',
                        'data_attribute': 'data-financial-item="indiCost_other"'
                    })
                }}
            {% endcall %}

            {% set flyout_settings = {
                'label': 'Grants & scholarships',
                'value': '$99,999',
                'is_editable': 'True',
                'note': 'You do not have to pay back grants and scholarships as long as you meet their requirements.',
                'data_attribute': 'data-financial-item="total_grantsScholarships"'
            } %}
            {% call() flyout(flyout_settings) %}
                {{
                    input.render({
                        'label': 'Grants',
                        'id': 'plan__grant-general',
                        'value': '0',
                        'data_attribute': 'data-financial-item="grant_general"'
                    })
                }}
                {{
                    input.render({
                        'label': 'Tuition waiver',
                        'id': 'plan__tuitionGrants',
                        'value': '0',
                        'data_attribute': 'data-financial-item="grant_tuition"'
                    })
                }}
                {{
                    input.render({
                        'label': 'Servicemember benefits',
                        'id': 'plan__grant-serviceMember',
                        'value': '0',
                        'data_attribute': 'data-financial-item="grant_servicemember"'
                    })
                }}
                {{
                    input.render({
                        'label': 'Scholarships',
                        'id': 'plan__general-cholarships',
                        'value': '0',
                        'data_attribute': 'data-financial-item="scholarship_general"'
                    })
                }}
                {{
                    input.render({
                        'label': 'School scholarship(s)',
                        'id': 'plan__schoolScholarships',
                        'value': '0',
                        'data_attribute': 'data-financial-item="scholarship_school"'
                    })
                }}
                {{
                    input.render({
                        'label': 'Other scholarship(s)',
                        'id': 'plan__otherScholarships',
                        'value': '0',
                        'data_attribute': 'data-financial-item="scholarship_other"'
                    })
                }}
            {% endcall %}
            {% set flyout_settings = {
                'label': 'Work-study<span class="graduate-content">, fellowships, and assistantships</span>' | safe,
                'value': '$99,999',
                'is_editable': 'True',
                'note': 'Work-study programs are part-time jobs on campus. If your offer includes work-study, that means you are eligible to apply for work-study jobs—a job will not be lined up for you. The work-study amount in your offer is the maximum you can earn. It is estimated and not guaranteed.',
                'data_attribute': 'data-financial-item="total_workStudyFellowAssist"'
            } %}
            {% call() flyout(flyout_settings) %}
                {{
                    input.render({
                        'label': 'Work-study',
                        'id': 'plan__workStudy',
                        'value': '0',
                        'data_attribute': 'data-financial-item="workStudy_workStudy"'
                    })
                }}
                <div class="graduate-content">
                {{
                    input.render({
                        'label': 'Fellowship funding',
                        'id': 'plan__fellowship',
                        'value': '0',
                        'data_attribute': 'data-financial-item="fellowAssist_fellowship"'
                    })
                }}
                {{
                    input.render({
                        'label': 'Assistantship funding',
                        'id': 'plan__assistantship',
                        'value': '0',
                        'data_attribute': 'data-financial-item="fellowAssist_assistantship"'
                    })
                }}
                </div>
            {% endcall %}

            {% set flyout_settings = {
                'label': 'Federal loans (minus loan fees)',
                'value': '$99,999',
                'is_editable': 'True',
                'note': 'Federal loans include some borrower protections and repayment options (including, under some circumstances, loan forgiveness) that are not typically offered by private and other non-federal loans.',
                'data_attribute': 'data-financial-item="total_fedLoans"'
            } %}

            {% call() flyout(flyout_settings) %}
            {% set tt = tooltip.render('Interest starts accumulating 6 months after you leave school.') %}
                <div class="block block--mid block--flush-top financial-item-group undergrad-content">
                    {{
                        input.render({
                            'label': 'Direct Subsidized Loan' ~ tt,
                            'id': 'plan__directSubsidized',
                            'value': '0',
                            'data_attribute': 'data-financial-item="fedLoan_directSub"'
                        })
                    }}
                    {{
                        text_item.render({
                            'label': 'Interest rate (%)',
                            'value': '4.53%',
                            'type': 'text',
                            'data_attribute': 'data-financial-item="rate_directSub"'
                        })
                    }}
                    {{
                        text_item.render({
                            'label': 'Loan fee (%)',
                            'value': '1.062%',
                            'type': 'text',
                            'data_attribute': 'data-financial-item="fee_directSub"'
                        })
                    }}
                </div>
                <div class="block block--mid block--flush-bottom financial-item-group">
                    {{
                        input.render({
                            'label': 'Direct Unsubsidized Loans' ~ tt,
                            'id': 'plan__directUnsub',
                            'value': '0',
                            'data_attribute': 'data-financial-item="fedLoan_directUnsub"'
                        })
                    }}
                    {{
                        text_item.render({
                            'label': 'Interest rate (%)',
                            'value': '9.99%',
                            'type': 'text',
                            'data_attribute': 'data-financial-item="rate_directUnsub"'
                        })
                    }}
                    {{
                        text_item.render({
                            'label': 'Loan fee (%)',
                            'value': '9.99%',
                            'type': 'text',
                            'data_attribute': 'data-financial-item="fee_directUnsub"'
                        })
                    }}
                </div>
            {% endcall %}
        </div>

        <h3>What other sources will help you cover the rest of your costs?</h3>

        <div class="financial-item-group">

            {% set flyout_settings = {
                'label': 'Other sources',
                'value': '$99,999',
                'is_editable': 'True',
                'data_attribute': 'data-financial-item="total_otherResources"'
            } %}
            {% call() flyout(flyout_settings) %}
                {{
                    input.render({
                        'label': 'Personal funds',
                        'id': 'plan__personalSavings',
                        'value': '0',
                        'data_attribute': 'data-financial-item="savings_personal"'
                    })
                }}
                {{
                    input.render({
                        'label': 'College savings plan (like 529 plans)',
                        'id': 'plan__collegeSavingsPlan',
                        'value': '0',
                        'data_attribute': 'data-financial-item="savings_collegeSavings"'
                    })
                }}
                {{
                    input.render({
                        'label': 'Income',
                        'id': 'plan__income',
                        'value': '0',
                        'data_attribute': 'data-financial-item="income_general"'
                    })
                }}
                {{
                    input.render({
                        'label': 'Employer tuition assistance or reimbursement',
                        'id': 'plan__employerAssistance',
                        'value': '0',
                        'data_attribute': 'data-financial-item="income_employerAssist"'
                    })
                }}
            {% endcall %}

        </div>

        <div class="financial-item-group">
            <h4 style="margin-top: 30px">Other Loans</h4>

            <p>If you still have uncovered costs after working with the financial aid office to exhaust all the options listed above, you and your family have two more loan options to consider:</p>

            {% set flyout_settings = {
                'label': 'Direct PLUS (Grad PLUS) loan' | safe,
                'value': '$0',
                'class': 'graduate-content o-costs-group--first',
                'is_editable': 'True',
                'data_attribute': 'data-financial-item="total_plusLoans"'
            } %}
            {% call() flyout(flyout_settings) %}
                <div class="plus-loan-form" >
                    {{
                        input.render({
                            'label': 'Loan amount',
                            'id': 'plan__gradPlus',
                            'value': '0',
                            'data_attribute': 'data-financial-item="plusLoan_gradPlus"'
                        })
                    }}
                    {{
                        text_item.render({
                            'label': 'Interest rate (%)',
                            'value': '0',
                            'data_attribute': 'data-financial-item="rate_gradPlus"',
                            'helper_text': 'Interest starts accumulating as soon as the money is sent to your school. The U.S. Department of Education sets the interest rate on federal student loans each July. If you are using this tool prior to July 1 for loans you will receive after July 1, then the interest rate may be different from what you see here.'
                        })
                    }}
                    {{
                        text_item.render({
                            'label': 'Loan fee (%)',
                            'value': '0',
                            'data_attribute': 'data-financial-item="fee_gradPlus"',
                            'helper_text': 'This fee is deducted immediately from your loan amount, lowering the total you receive.'
                        })
                    }}
                </div>
            {% endcall %}

            {% set flyout_settings = {
                'label': 'Parent PLUS loan' | safe,
                'value': '$0',
                'class': 'dependent-content o-costs-group--first',
                'note': '',
                'is_editable': 'True',
                'data_attribute': 'data-financial-item="total_plusLoans"'
            } %}
            {% call() flyout(flyout_settings) %}
                 <div class="plus-loan-form">
                    {{
                        input.render({
                            'label': 'Loan amount',
                            'id': 'plan__parentPlus',
                            'value': '0',
                            'data_attribute': 'data-financial-item="plusLoan_parentPlus"'
                        })
                    }}
                    {{
                        text_item.render({
                            'label': 'Interest rate (%)' ~ tooltip.render('Interest starts accumulating as soon as the money is sent to your school. The U.S. Department of Education sets the interest rate on federal student loans each July. If you are using this tool prior to July 1 for loans you will receive after July 1, then the interest rate may be different from what you see here.'),
                            'value': '0',
                            'data_attribute': 'data-financial-item="rate_parentPlus"',
                        })
                    }}
                    {{
                        text_item.render({
                            'label': 'Loan fee (%)',
                            'value': '0',
                            'data_attribute': 'data-financial-item="fee_parentPlus"',
                            'helper_text': 'This fee is deducted immediately from your loan amount, lowering the total you receive.'
                        })
                    }}
                </div>
               {{ notification.render(
                    'information',
                    true,
                    '',
                    'More details about parent PLUS loans can be found on the <a href="https://studentaid.gov/understand-aid/types/loans/plus/parent" target="_blank" class="external-link" rel="noreferrer noopener">Federal Student Aid website.</a></span>' | safe
                ) }}
            {% endcall %}

            {% set flyout_settings = {
                'label': 'Private loans',
                'value': '$0',
                'class': 'private-loan-flyout',
                'is_editable': 'True',
                'data_attribute': 'data-financial-item="total_privLoans"'
            } %}
            {% call() flyout(flyout_settings) %}
                <div class="private-loan-form">
                    <h4>Private Loan</h4>
                    {{
                        input.render({
                            'label': 'Loan amount',
                            'id': 'plan__privLoan1',
                            'value': '0',
                            'data_attribute': 'data-financial-item="privLoan_privLoan1"'
                        })
                    }}
                    {{
                        input.render({
                            'label': 'Interest rate (%)',
                            'id': 'plan__privLoan1Rate',
                            'value': '0',
                            'data_attribute': 'data-financial-item="rate_privLoan1"',
                            'helper_text': 'If you are offered a fixed interest rate, it will not change throughout the life of the loan. If you are offered a variable interest rate, it might change. Enter the initial interest rate from your offer here.'
                        })
                    }}
                    {{
                        input.render({
                            'label': 'Loan fee (%)',
                            'id': 'plan__privLoan1Fee',
                            'value': '0',
                            'data_attribute': 'data-financial-item="fee_privLoan1"',
                            'helper_text': 'This fee is deducted immediately from your loan amount, lowering the total you receive.'
                        })
                    }}
                </div>
            {% endcall %}
        </div>

        <div class="costs-not-covered" data-state-visibility="uncovered-costs">
            <h3>Costs not covered</h3>
            <p>You still have uncovered costs. The application assumes you will need loans to cover these costs, and that debt is reflected below. You can lower this assumed debt by adding more resources above.</p>
            <div class="financial-item-group">
                {% set flyout_settings = {
                    'label': 'Loan for uncovered costs',
                    'value': '$0',
                    'class': 'uncovered-loan-flyout',
                    'is_editable': 'False',
                    'status': 'warning',
                    'data_attribute': 'data-financial-item="gapLoan_gapLoan"'
                } %}
                {% call() flyout(flyout_settings) %}
                    {{
                        text_item.render({
                            'label': 'Uncovered costs loan amount',
                            'value': '0',
                            'data_attribute': 'data-financial-item="gapLoan_gapLoan"'
                        })
                    }}
                    {{
                        text_item.render({
                            'label': 'Interest rate (%)',
                            'value': '0',
                            'data_attribute': 'data-financial-item="rate_gapLoan"',
                            'helper_text': ''
                        })
                    }}
                    {{
                        text_item.render({
                            'label': 'Loan fee (%)',
                            'value': '0',
                            'data_attribute': 'data-financial-item="fee_gapLoan"',
                            'helper_text': 'This fee is deducted immediately from your loan amount, lowering the total you receive.'
                        })
                    }}
                {% endcall %}
            </div>
        </div>

        <div class="estimate--total-costs">
            {{
                text_item.render({
                    'label': 'Estimated debt at graduation: ',
                    'value': '0',
                    'type': 'subtotal',
                    'helper_text': 'including interest accrued during school',
                    'data_attribute': 'data-financial-item="debt_tenYearTotal"'
                })
            }}

            {{
                text_item.render({
                    'label': 'Your estimated monthly payment:',
                    'value': '0',
                    'type': 'subtotal',
                    'data_attribute': 'data-financial-item="debt_tenYearMonthly"'
                })
            }}
        </div>
    </div>
    <div class="college-costs__tool-section-buttons block block--mid">
        <h3 class="up-next"><strong>Up next:</strong> <span class="up-next--desc">See your customized estimate</span></h3>
        <div class=nav-button-container>
            <button class="a-btn a-btn--prev btn__nav" data-destination="debt-at-grad">Previous</button>
            <button class="a-btn a-btn--next btn__nav" data-destination="debt-guideline">Next</button>
        </div>
        <p>
            <button class="a-btn a-btn--link btn__nav" data-destination="save-finish">Save and get a URL for later</button>        
        </p>

    </div>
</section>
