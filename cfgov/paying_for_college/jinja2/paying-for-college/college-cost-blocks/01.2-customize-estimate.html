{% import "v1/includes/atoms/checkbox.html" as checkbox with context %}

<section class="college-costs__tool-section college-costs__tool-section--make-a-plan" data-tool-section="customize-estimate">
    <h2 tabindex="-1">Customize your estimate</h2>

    <div class="block block--mid">
        <h3>Enter information from your financial aid offer</h3>

        <div class="financial-item-group">
            {% set flyout_settings = {
                'label': 'Costs',
                'value': '$0',
                'is_editable': 'True',
                'status': 'warning',
                'data_attribute': 'data-financial-item="total_costs"'
            } %}
            {% call() flyout(flyout_settings) %}
                {{
                    input.render({
                        'label': 'Tuition and fees',
                        'id': 'plan__tuition',
                        'value': '0',
                        'data_attribute': 'data-financial-item="dirCost_tuition"'
                    })
                }}
                {{
                    input.render({
                        'label': 'Housing and meals',
                        'id': 'plan__room-board',
                        'value': '0',
                        'data_attribute': 'data-financial-item="dirCost_housing"'
                    })
                }}
                {{
                    input.render({
                        'label': 'Other direct costs',
                        'id': 'plan__otherDirectCosts',
                        'value': '0',
                        'data_attribute': 'data-financial-item="dirCost_other"'
                    })
                }}
                {{
                    input.render({
                        'label': 'Books and supplies',
                        'id': 'plan__books',
                        'value': '0',
                        'data_attribute': 'data-financial-item="indiCost_books"'
                    })
                }}
                {{
                    input.render({
                        'label': 'Transportation',
                        'id': 'plan__transportation',
                        'value': '0',
                        'data_attribute': 'data-financial-item="indiCost_transportation"'
                    })
                }}
                {{
                    input.render({
                        'label': 'Personal/other/miscellaneous expenses',
                        'id': 'plan__other',
                        'value': '0',
                        'data_attribute': 'data-financial-item="indiCost_other"'
                    })
                }}
                {{
                input.render({
                        'label': 'Additional financial obligations',
                        'id': 'plan__otherIndirect',
                        'value': '0',
                        'data_attribute': 'data-financial-item="otherCost_additional"'
                    })
                }}
            {% endcall %}

            {% set flyout_settings = {
                'label': 'Grants & scholarships',
                'value': '$99,999',
                'is_editable': 'True',
                'data_attribute': 'data-financial-item="total_grantsScholarships"'
            } %}
            {% call() flyout(flyout_settings) %}
                <div class="undergrad-content">
                    {{
                        input.render({
                            'label': 'Federal Pell Grants',
                            'id': 'plan__pellGrants',
                            'value': '0',
                            'data_attribute': 'data-financial-item="grant_pell"'
                        })
                    }}
                    {{
                        input.render({
                            'label': 'Federal SEOG grant',
                            'id': 'plan__seog',
                            'value': '0',
                            'data_attribute': 'data-financial-item="grant_seog"'
                        })
                    }}
                </div>
                {{
                    input.render({
                        'label': 'Other federal grants',
                        'id': 'plan__other-federal',
                        'value': '0',
                        'data_attribute': 'data-financial-item="grant_otherFederal"'
                    })
                }}

                {{
                    input.render({
                        'label': 'State grant(s)',
                        'id': 'plan__stateGrants',
                        'value': '0',
                        'data_attribute': 'data-financial-item="grant_state"'
                    })
                }}
                {{
                    input.render({
                        'label': 'School grant(s)',
                        'id': 'plan__schoolGrants',
                        'value': '0',
                        'data_attribute': 'data-financial-item="grant_school"'
                    })
                }}
                {{
                    input.render({
                        'label': 'Tuition waiver',
                        'id': 'plan__tuitionGrants',
                        'value': '0',
                        'data_attribute': 'data-financial-item="grant_tuition"'
                    })
                }}
                {{
                    input.render({
                        'label': 'Other grant(s)',
                        'id': 'plan__grant-other',
                        'value': '0',
                        'data_attribute': 'data-financial-item="grant_other"'
                    })
                }}
                {{
                    input.render({
                        'label': 'Military Tuition Assistance',
                        'id': 'plan__mta',
                        'value': '0',
                        'data_attribute': 'data-financial-item="grant_mta"'
                    })
                }}
                {{
                    input.render({
                        'label': 'GI Bill',
                        'id': 'plan__gibill',
                        'value': '0',
                        'data_attribute': 'data-financial-item="grant_gibill"'
                    })
                }}

                {{
                    input.render({
                        'label': 'Other servicemember benefits',
                        'id': 'plan__serviceMemberOther',
                        'value': '0',
                        'data_attribute': 'data-financial-item="grant_servicememberOther"'
                    })
                }}
                {{
                    input.render({
                        'label': 'State scholarship(s)',
                        'id': 'plan__stateScholarships',
                        'value': '0',
                        'data_attribute': 'data-financial-item="scholarship_state"'
                    })
                }}
                {{
                    input.render({
                        'label': 'School scholarship(s)',
                        'id': 'plan__schoolScholarships',
                        'value': '0',
                        'data_attribute': 'data-financial-item="scholarship_school"'
                    })
                }}
                {{
                    input.render({
                        'label': 'Other scholarship(s)',
                        'id': 'plan__otherScholarships',
                        'value': '0',
                        'data_attribute': 'data-financial-item="scholarship_other"'
                    })
                }}
            {% endcall %}
            {% set flyout_settings = {
                'label': 'Work-study<span class="graduate-content">, fellowships, and assistantships</span>' | safe,
                'value': '$99,999',
                'is_editable': 'True',
                'data_attribute': 'data-financial-item="total_workStudyFellowAssist"'
            } %}
            {% call() flyout(flyout_settings) %}
                {{
                    input.render({
                        'label': 'Work-study',
                        'id': 'plan__workStudy',
                        'value': '0',
                        'data_attribute': 'data-financial-item="workStudy_workStudy"'
                    })
                }}
                <div class="graduate-content">
                {{
                    input.render({
                        'label': 'Fellowship funding',
                        'id': 'plan__fellowship',
                        'value': '0',
                        'data_attribute': 'data-financial-item="fellowAssist_fellowship"'
                    })
                }}
                {{
                    input.render({
                        'label': 'Assistantship funding',
                        'id': 'plan__assistantship',
                        'value': '0',
                        'data_attribute': 'data-financial-item="fellowAssist_assistantship"'
                    })
                }}
                </div>
            {% endcall %}

            {% set flyout_settings = {
                'label': 'Federal loans (minus loan fees)',
                'value': '$99,999',
                'is_editable': 'True',
                'data_attribute': 'data-financial-item="total_fedLoans"'
            } %}
            {% call() flyout(flyout_settings) %}
                <div class="block block--mid block--flush-top financial-item-group undergrad-content">
                    {{
                        input.render({
                            'label': 'Direct Subsidized Loan',
                            'id': 'plan__directSubsidized',
                            'help_text': 'Interest starts accumulating 6 months after you leave school',
                            'value': '0',
                            'data_attribute': 'data-financial-item="fedLoan_directSub"'
                        })
                    }}
                    {{
                        text_item.render({
                            'label': 'Interest rate (%)',
                            'value': '4.53%',
                            'type': 'text',
                            'data_attribute': 'data-financial-item="rate_directSub"'
                        })
                    }}
                    {{
                        text_item.render({
                            'label': 'Loan fee (%)',
                            'value': '1.062%',
                            'type': 'text',
                            'data_attribute': 'data-financial-item="fee_directSub"'
                        })
                    }}
                </div>
                <div class="block block--mid block--flush-bottom financial-item-group">
                    {{
                        input.render({
                            'label': 'Direct Unsubsidized Loans',
                            'id': 'plan__directUnsub',
                            'helper_text': 'Interest starts accumulating 6 months after you leave school',
                            'value': '0',
                            'data_attribute': 'data-financial-item="fedLoan_directUnsub"'
                        })
                    }}
                    {{
                        text_item.render({
                            'label': 'Interest rate (%)',
                            'value': '9.99%',
                            'type': 'text',
                            'data_attribute': 'data-financial-item="rate_directUnsub"'
                        })
                    }}
                    {{
                        text_item.render({
                            'label': 'Loan fee (%)',
                            'value': '9.99%',
                            'type': 'text',
                            'data_attribute': 'data-financial-item="fee_directUnsub"'
                        })
                    }}
                </div>
            {% endcall %}

            <h3>What other sources will help you cover the rest of your costs?</h3>

            {% set flyout_settings = {
                'label': 'Other sources',
                'value': '$99,999',
                'is_editable': 'True',
                'data_attribute': 'data-financial-item="total_otherResources"'
            } %}
            {% call() flyout(flyout_settings) %}
                {{
                    input.render({
                        'label': 'Personal funds',
                        'id': 'plan__personalSavings',
                        'value': '0',
                        'data_attribute': 'data-financial-item="savings_personal"'
                    })
                }}
                {{
                    input.render({
                        'label': 'College savings plan (like 529 plans)',
                        'id': 'plan__collegeSavingsPlan',
                        'value': '0',
                        'data_attribute': 'data-financial-item="savings_collegeSavings"'
                    })
                }}
                {{
                    input.render({
                        'label': 'Family contribution',
                        'id': 'plan__familySavings',
                        'value': '0',
                        'data_attribute': 'data-financial-item="savings_family"'
                    })
                }}
                {{
                    input.render({
                        'label': 'Estimated off-campus job income',
                        'id': 'plan__jobIncome',
                        'value': '0',
                        'data_attribute': 'data-financial-item="income_jobOffCampus"'
                    })
                }}
                {{
                    input.render({
                        'label': 'Estimated on-campus job income (not work-study)',
                        'id': 'plan__onCampusJob',
                        'value': '0',
                        'data_attribute': 'data-financial-item="income_jobOnCampus"'
                    })
                }}
                {{
                    input.render({
                        'label': 'Employer tuition assistance or reimbursement',
                        'id': 'plan__employerAssistance',
                        'value': '0',
                        'data_attribute': 'data-financial-item="income_employerAssist"'
                    })
                }}
                {{
                    input.render({
                        'label': 'Other funding',
                        'id': 'plan__otherFunding',
                        'value': '0',
                        'data_attribute': 'data-financial-item="income_otherFunding"'
                    })
                }}
            {% endcall %}

            {% set flyout_settings = {
                'label': 'Other loans (minus loan fees)' | safe,
                'value': '$99,999',
                'is_editable': 'True',
                'data_attribute': 'data-financial-item="total_publicLoans"'
            } %}
            {% call() flyout(flyout_settings) %}
                <div class="block block--mid block--flush-top financial-item-group">
                    {{
                        input.render({
                            'label': 'Loan from your state',
                            'id': 'plan__stateLoan',
                            'value': '0',
                            'data_attribute': 'data-financial-item="publicLoan_state"'
                        })
                    }}
                    {{
                        input.render({
                            'label': 'Interest rate (%)',
                            'id': 'plan__stateLoanRate',
                            'value': '0',
                            'data_attribute': 'data-financial-item="rate_state"'
                        })
                    }}
                    {{
                        input.render({
                            'label': 'Loan fee (%)',
                            'id': 'plan__stateLoanFee',
                            'value': '0',
                            'data_attribute': 'data-financial-item="fee_state"'
                        })
                    }}
                </div>
                <div class="block block--mid financial-item-group">
                    {{
                        input.render({
                            'label': 'Loan from this school',
                            'id': 'plan__schoolLoan',
                            'value': '0',
                            'data_attribute': 'data-financial-item="publicLoan_institutional"'
                        })
                    }}
                    {{
                        input.render({
                            'label': 'Interest rate (%)',
                            'id': 'plan__schoolLoanRate',
                            'value': '0',
                            'data_attribute': 'data-financial-item="rate_institutional"'
                        })
                    }}
                    {{
                        input.render({
                            'label': 'Loan fee (%)',
                            'id': 'plan__schoolLoanFee',
                            'value': '0',
                            'data_attribute': 'data-financial-item="fee_institutional"'
                        })
                    }}
                </div>
                <div class="block block--mid block--flush-bottom financial-item-group">
                    {{
                        input.render({
                            'label': 'Loan from a non-profit',
                            'id': 'plan__nonprofitLoan',
                            'value': '0',
                            'data_attribute': 'data-financial-item="publicLoan_nonprofit"'
                        })
                    }}
                    {{
                        input.render({
                            'label': 'Interest rate (%)',
                            'id': 'plan__nonprofitLoanRate',
                            'value': '0',
                            'data_attribute': 'data-financial-item="rate_nonprofit"'
                        })
                    }}
                    {{
                        input.render({
                            'label': 'Loan fee (%)',
                            'id': 'plan__nonprofitLoanFee',
                            'value': '0',
                            'data_attribute': 'data-financial-item="fee_nonprofit"'
                        })
                    }}
                </div>
            {% endcall %}
            <div class="block block--mid">
                <div class="plus-loan-flyout graduate-content">
                    {% set flyout_settings = {
                        'label': 'Direct PLUS (Grad PLUS) loan' | safe,
                        'value': '$0',
                        'is_editable': 'True',
                        'data_attribute': 'data-financial-item="total_plusLoans"'
                    } %}
                    {% call() flyout(flyout_settings) %}
                        <div class="plus-loan-form" >
                            {{
                                input.render({
                                    'label': 'Loan amount',
                                    'id': 'plan__gradPlus',
                                    'value': '0',
                                    'data_attribute': 'data-financial-item="plusLoan_gradPlus"'
                                })
                            }}
                            {{
                                text_item.render({
                                    'label': 'Interest rate (%)',
                                    'value': '0',
                                    'data_attribute': 'data-financial-item="rate_gradPlus"',
                                    'helper_text': 'Interest starts accumulating as soon as the money is sent to your school. The U.S. Department of Education sets the interest rate on federal student loans each July. If you are using this tool prior to July 1 for loans you will receive after July 1, then the interest rate may be different from what you see here.'
                                })
                            }}
                            {{
                                text_item.render({
                                    'label': 'Loan fee (%)',
                                    'value': '0',
                                    'data_attribute': 'data-financial-item="fee_gradPlus"',
                                    'helper_text': 'This fee is deducted immediately from your loan amount, lowering the total you receive.'
                                })
                            }}
                        </div>
                    {% endcall %}
                </div>
                <div class="plus-loan-flyout dependent-content">
                    {% set flyout_settings = {
                        'label': 'Parent PLUS loan' | safe,
                        'value': '$0',
                        'is_editable': 'True',
                        'data_attribute': 'data-financial-item="total_plusLoans"'
                    } %}
                    {% call() flyout(flyout_settings) %}
                         <div class="plus-loan-form">
                            {{
                                input.render({
                                    'label': 'Loan amount',
                                    'id': 'plan__parentPlus',
                                    'value': '0',
                                    'data_attribute': 'data-financial-item="plusLoan_parentPlus"'
                                })
                            }}
                            {{
                                text_item.render({
                                    'label': 'Interest rate (%)',
                                    'value': '0',
                                    'data_attribute': 'data-financial-item="rate_parentPlus"',
                                    'helper_text': 'Interest starts accumulating as soon as the money is sent to your school. The U.S. Department of Education sets the interest rate on federal student loans each July. If you are using this tool prior to July 1 for loans you will receive after July 1, then the interest rate may be different from what you see here.'
                                })
                            }}
                            {{
                                text_item.render({
                                    'label': 'Loan fee (%)',
                                    'value': '0',
                                    'data_attribute': 'data-financial-item="fee_parentPlus"',
                                    'helper_text': 'This fee is deducted immediately from your loan amount, lowering the total you receive.'
                                })
                            }}
                            <div class="u-mt30">
                                {{
                                    checkbox.render({
                                        'id': 'plan__parentPlusFeeRepay',
                                        'label': 'Although parent PLUS loans are made to parents only—not students—some students take responsibility for repaying parent PLUS loans. Click here if you plan to repay your parent’s PLUS loans, and this loan amount will be added to your projected debt total.',
                                  })
                                }}

                            </div>
                        </div>
                       {{ notification.render(
                            'information',
                            true,
                            '',
                            'More details about parent PLUS loans can be found on the <a href="https://studentaid.gov/understand-aid/types/loans/plus/parent" target="_blank" class="external-link" rel="noreferrer noopener">Federal Student Aid website.</a></span>' | safe
                        ) }}
                    {% endcall %}
                </div>
                 <div class="private-loan-flyout">
                    {% set flyout_settings = {
                        'label': 'Private loans',
                        'value': '$0',
                        'is_editable': 'True',
                        'data_attribute': 'data-financial-item="total_privateLoans"'
                    } %}
                    {% call() flyout(flyout_settings) %}
                        <div class="private-loan-form">
                            <h4>Private Loan</h4>
                            {{
                                input.render({
                                    'label': 'Loan amount',
                                    'id': 'plan__privateLoan1',
                                    'value': '0',
                                    'data_attribute': 'data-financial-item="privLoan_privateLoan1"'
                                })
                            }}
                            {{
                                input.render({
                                    'label': 'Interest rate (%)',
                                    'id': 'plan__privateLoan1Rate',
                                    'value': '0',
                                    'data_attribute': 'data-financial-item="rate_privateLoan1"',
                                    'helper_text': 'If you are offered a fixed interest rate, it will not change throughout the life of the loan. If you are offered a variable interest rate, it might change. Enter the initial interest rate from your offer here.'
                                })
                            }}
                            {{
                                input.render({
                                    'label': 'Loan fee (%)',
                                    'id': 'plan__privateLoan1Fee',
                                    'value': '0',
                                    'data_attribute': 'data-financial-item="fee_privateLoan1"',
                                    'helper_text': 'This fee is deducted immediately from your loan amount, lowering the total you receive.'
                                })
                            }}
                            <div class="undergrad-content u-mt30">
                                {{
                                    checkbox.render({
                                        'id': 'plan__privateLoan1Repay',
                                        'label': 'Click here if you plan to repay this private loan, and this loan amount will be added to your projected debt total.',
                                  })
                                }}
                            </div>
                        </div>

                        <button data-state-based-visibility="none" class="a-btn a-btn--link u-mt30">{{ svg_icon('plus-round') }} Add another Private Loan</button>
                    {% endcall %}
                </div>
                <div class="estimate--total-costs">
                    {{ notification.render(
                        'information',
                        true,
                        '',
                        '<p>Estimated total costs of loans (including interest): <span class="" data-financial-item="debt_totalAtGrad">$XX,XXX</span><br>Your estimated monthly payment is <span data-financial-item="debt_tenYearMonthly"></span>' | safe,
                        'data-state_uncovered_costs="true"' | safe
                    ) }}                    
                </div>
            </div>

        </div>
    </div>
    <div class="college-costs__tool-section-buttons block block--mid">
        <button class="a-btn college-costs__buttons--next btn__nav" data-destination="affording-payments">Estimate how much I'll owe</button>
    </div>
</section>
