/* ==========================================================================
   "Form explainer" custom styles
   ========================================================================== */

@gold-dk: #FF9E1B; // gold
@gold-md: #FFCE8D; // gold-60
@gold-lt: #FFD8A3;
@gold-bg: #FFF8F0;

@red-dk: #D486B2;
@red-md: #DC9CBF;
@red-lt: #F0D8E2;
@red-bg: #F9F6F6;

@blue-dk: #6F88B2;
@blue-md: #9DAECC;
@blue-lt: #D3DAEB;
@blue-bg: #F4F7FA;

@teal-dk: #579695; // teal-80
@teal-md: #70A6A5;
@teal-lt: #D4E7E6; // teal-20
@teal-bg: #F2F8F8; 

@colors: gold, red, blue, teal;

.form-explainer {

  .image-map {
    display: block;
    box-sizing: border-box;
    margin-bottom: unit( 30px / @base-font-size-px, em );
    .u-clearfix();
  }

  .image-map_wrapper {
    position: relative;
  }

  .image-map_image {
    display: block;
    box-sizing: border-box;
    border: 1px solid @black;
  }

  .image-map_overlay {
    position: absolute;
    box-sizing: border-box;
    border: 2px solid transparent;
    background: transparent;
    transition: border 100ms ease-out;
  }

  each( @colors, {
    @color: @{value}-dk;

    .image-map_overlay__category-@{index} {
      background: fade( @@color, 20% );

      &:hover,
      &.hover-has-attention {
        border-color: @@color;
      }

      &:focus,
      &.has-attention {
        border-color: @@color;
        background: fade( @@color, 50% );
      }

      &:focus {
        outline: 1px dotted @@color;
        outline-offset: 1px;
      }
    }
  } );


  // Expandable overrides

  .o-expandable-group .o-expandable {
    border: 4px solid transparent;
    box-sizing: border-box;
    transition: transform 100ms ease-out;
    margin-bottom: 5px;

    &:first-child {
      border-top: 4px solid transparent;
    }

    &.has-attention {
      .respond-to-min( @bp-sm-min, {
        transform: translateX( unit( -@grid_gutter-width / 2 / @base-font-size-px, em ) );
      });

      .o-expandable_link {
        color: @black;
      }
    }

    .o-expandable_content__expanded:before {
      border: none;
    }

    .o-expandable_label {
      font-size: unit( 16 / @base-font-size-px, em );
    }

    each( @colors, {
      @tint: @{value}-bg;
      @light: @{value}-lt;
      @med: @{value}-md;

      &.o-expandable__form-explainer-category-@{index} {
        background-color: @@tint;

        .o-expandable_target {
          background-color: @@light;
        }

        border-color: @@light;

        &.has-attention,
        &:hover {
          border-color: @@med;
        }

        &.has-attention {
          .o-expandable_target {
            background-color: @@med;
          }
        }

        &.has-attention {
          .o-expandable_target {
            background-color: @@med;
          }
        }
      }
    } );

    &.o-expandable__form-explainer + h3 {
      margin-top: unit( @grid_gutter-width / @base-font-size-px, em );
    }
  }

  .o-expandable_header-left {
    max-width: 80%;
  }

  .o-expandable_header-right {
    display: block;
    width: 20%;
    text-align: right;
  }

  .o-expandable_link {
    color: @gray-80;
  }

  .explain {
    margin: 0 auto unit( 60px / @base-font-size-px, em );

    .respond-to-max( @bp-xs-max, {
      &_image-map {
        display:flex;
      }
    });

    .respond-to-min( @bp-sm-min, {
      &_container{
        display:flex;
      }

      &_image-map {
        max-width: 66%;
      }

      .image-map_wrapper {
        position: sticky;
        top: 2vh;
      }

      .image-map_image {
        margin-right: 2px;
        max-height: 96vh;
        max-width: 100%;
      }

      &_terms {
        flex: 1;
        padding-left: unit( 35px / @base-font-size-px, em );
      }

      &_pagination {
        margin-bottom: unit( @grid_gutter-width / 3 / @base-font-size-px, em );
      }
    } );
  }

  .explain_page {
    // Position is needed to allow .explain_image-map
    // to stick to the bottom of .explain_page.
    .respond-to-min( @bp-sm-min, {
      position: relative;
    } );
  }

  .explain_pagination {
    margin-top: unit( 15px / @base-font-size-px, em );
    .u-clearfix();
  }

  .explain_pagination .pagination_form {
    padding-top: unit( 11px / @base-font-size-px, em );
    padding-bottom: unit( 10px / @base-font-size-px, em );
  }

  .form-explainer_page-buttons {
    button {
      position: absolute;
      top: 45%;
      padding-left: unit( 10px / @btn-font-size, em );
      padding-right: unit( 10px / @btn-font-size, em );
      z-index: 100;
      &.prev {
        left: -16px;
      }

      &.next {
        right: -16px;
      }
    }
  }

  .form-explainer_nav-label {
    float: left;
  }

  .form-explainer_page-links {
    margin-bottom: unit( @grid_gutter-width / 3 / @base-font-size-px, em ) !important;
    float: left;
    li {
      float: left;
      a {
        float: left;
        display: block;
        padding: 0 unit( @grid_gutter-width / 2 / @base-font-size-px, em );
        cursor: pointer;

        .respond-to-min( @bp-sm-min, {
          padding: 0;
          border-bottom-width: 1px;
          margin: 0 unit( @grid_gutter-width / 2 / @base-font-size-px, em );
        } );

        &.current-page {
          &,
          &:focus,
          &:hover,
          &:active {
            color: @black;
            border-bottom-width: 0;
          }
        }
      }
    }
  }
}
