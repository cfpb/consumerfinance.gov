/* ==========================================================================
   "Rate checker" custom styles
   ========================================================================== */

.rate-checker {

    .page-intro {
        border-bottom: 1px solid @gray-10;
    }

    .rc-illu-inner {
        padding: 1em 4.5em 0;
    }

    .loan-type,
    .calc-footer,
    .calc-subsection {
        .grid_column( 12 );
    }

    /*
        layout
        --------------------------- */

    .rc-results {
        .grid_column( 8 );
        .grid_pull( 4 );
    }

    .loan-amt-total,
    .state-col,
    .credit-score,
    .form-intro {
        .grid_column( 3, 3 );

        .wrapper {
            padding: 0;
        }
    }

    /*
        Sidebar with all the user input
        --------------------------- */
    .calculator {
        .grid_column( 4 );
        .grid_push( 8 );

        background: @gray-5;
        .u-webfont-regular();

        p:last-child,
        section p:last-child {
            margin: 0;
        }

        label {
            .u-webfont-medium();

            display: block;
            margin-bottom: unit( 4px / @base-font-size-px, em );
            text-transform: none;
        }

        .help {
            font-size: 0.9em;
        }

        section {
            padding: unit( 30px / @base-font-size-px, em ) 0;
            border-top: 1px solid @gray-10;
        }

        section:first-child,
        section:nth-child(2) {
            border-top: none;
        }

        section:first-child {
            padding: unit( 30px / @base-font-size-px, em ) 0 0;
        }

        .calc-footer {
            padding: unit( 15px / @base-font-size-px, em ) 0; // the bottom <section> has less padding
        }

        input[type='number'] {
            -moz-appearance: textfield;
        }

        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
        }

        .calc-subsection {
            padding: 0 0 unit( 30px / @base-font-size-px, em );
            border-top: none;
        }

        .form-sub {
            color: @dark-gray;
            font-size: 0.714285714em;
            .u-webfont-regular();
        }

        #arm-warning {
            padding-top: 0;
            border-top: 0;
            margin-top: unit( -10px / @base-font-size-px, em );
        }
    }

    .calc-loan-details {
        .upper {
            margin-bottom: unit( 15px / @base-font-size-px, em );
        }
    }


    .loan-amt-total {
        padding-top: unit( 10px / @base-font-size-px, em );

        span {
            display: block;
            margin-top: unit( 10px / @base-font-size-px, em );
            .u-webfont-medium();
        }
    }


    .county {
        padding-top: unit( 10px / @base-font-size-px, em );
    }

    .half-width-gt-1230 {
        .grid_column( 1, 2 );
    }

    .downpayment-warning {
        .grid_column( 12 );

        padding-top: unit( 10px / @base-font-size-px, em );
        font-size: 0.875em;
    }

    .timestamp-message {
        margin-right: 1.25em; //align it nicely with the chart
        font-size: 0.875em;
        text-align: right;
    }

    /*
        Range slider for credit score
        --------------------------- */
    .credit-score {
        position: relative;

        .labels {
            margin: unit( 15px / @base-font-size-px, em ) 0 unit( 8px / @base-font-size-px, em );
            font-size: 0.625em;
            line-height: 0;
        }

        .max {
            float: right;
        }
    }

    .range {
        margin-bottom: 1.5em;
    }

    .range-text {
        position: absolute;
        display: block;
        margin-left: unit( -10px / @base-font-size-px, em );
        font-size: 0.875em;
        white-space: nowrap;
    }

    .rangeslider {
        position: relative;
        display: block;
        width: 100%;
        height: 20px;
        background: transparent
                    url( '@{image_path}/slider-bg.png' )
                    scroll
                    no-repeat
                    center
                    center;
        background-size: 100%;
    }

    .rangeslider__fill {
        position: absolute;
        top: 0;
        background: #0f0;
    }

    .rangeslider__handle {
        position: absolute;
        display: inline-block;
        width: 22px;
        height: 21px;
        border: 0;
        background: transparent
                    url( '@{image_path}/slider-handle.png' )
                    no-repeat
                    0
                    0;
        background-size: 100%;

        &.warning {
            width: 22px;
            height: 21px;
            background: transparent
                        url( '@{image_path}/slider-handle.png' )
                        no-repeat
                        0
                        100%;
            background-size: 100%;
        }

    }

    #credit-score:focus + .rangeslider .rangeslider__handle {
        border: 1px solid #0072ce;
        -webkit-box-shadow: none;
        box-shadow: none;
        outline: 1px solid #0072ce;
        outline-offset: 0;
    }

    #slider-range {
        text-align: center;
    }

    /*
        Main section with output
        --------------------------- */
    .rate-checker-heading {
        margin-top: unit( 40px / @base-font-size-px, em );
        font-size: 1.375em;
    }


    /*
        Middle section with chart
        --------------------------- */

    // this is shameful, but this is needed to force
    // highcharts to display overflowing tooltips
    .highcharts-container {
        overflow: visible !important;
    }

    .chart {
        position: relative;
        padding-top: unit( 40px / @base-font-size-px, em );
        border-top: 1px solid @gray-10;
        border-bottom: 1px solid @gray-10;
        margin: unit( 20px / @base-font-size-px, em )
                unit( 20px / @base-font-size-px, em )
                unit( 20px / @base-font-size-px, em )
                0;

        &.geolocating {
            background: transparent
                        url( '@{image_path}icon_spinner.gif' )
                        scroll
                        no-repeat
                        center
                        center;
            #chart {
                opacity: 0;
            }
        }

        .highcharts-color-0 {
            fill: #ADDC91;

            &:hover {
                fill: #2CB34A;
            }
        }

        .highcharts-tooltip-box {
            fill: none
        }

        .m-notification {
            position: absolute;
            top: 30%;
        }

        .warning {
            position: relative;

            .highcharts-container {
                opacity: 0.3;
            }
        }

        figure {
            .u-reset;
        }
    }

    .data-label {
        text-align: center;
    }

    .data-label_number {
        background-color: #fff;

        .respond-to-max( @bp-xs-max, {
            display: block;
            transform: rotate( -90deg );
        } );
    }

    .chart-caption {
        padding-right: 1em;
        padding-bottom: 1em;
        // Magic number to line up caption with chart
        margin-left: unit( 60px / @base-font-size-px, em );
        font-size: 1em;
    }

    .caption-title {
        .grid_column( 12 );

        white-space: nowrap;
    }

    .rc-data-link {
        .grid_column( 12 );

        margin-top: unit( ( @grid_gutter-width / 2 ) / @base-font-size-px, em );
        white-space: nowrap;
    }

    .highcharts-tooltip > span {
        z-index: 9999;
        padding: unit( 4px / @base-font-size-px, em )
                 unit( 10px / @base-font-size-px, em )
                 unit( 4px / @base-font-size-px, em )
                 unit( 8px / @base-font-size-px, em );
        border: 2px solid @green-60;
        margin: 0 2px;
        background-color: #fff;
        color: @dark-gray;
    }

    .chart-tooltip {
        z-index: 9999;

        .lenders {
            .u-webfont-demi();

            display: inline-block;
            max-width: 30%;
            font-size: 3em;
            text-align: right;

        }

        .text {
            display: inline-block;
            min-width: 70%;
        }
    }

    /*
        Compare interest rate costs
        --------------------------- */
    .compare {
        .u-webfont-regular();

        margin-top: unit( 30px / @base-font-size-px, em );
        label {
            .u-visually-hidden;
        }
    }

    // Layouts
    .rc-comp-1 {
        .grid_column( 1 );
    }

    .rc-comp-3 {
        .grid_column( 3 );
    }

    .rc-comp-3-push {
        .grid_column( @columns: 3; @prefix: 1; @suffix: 0 )
    }

    .rc-comp-5 {
        .grid_column( 5 );
    }

    .vs {
        font-size: 1.375em;
        text-align: center;
    }

    .rc-comparison-subhead {
        font-size: 1em;
    }

    .rc-comparison-subsection {
        padding: 1em 0;
        border-top: 1px solid @gray-10;
    }

    .interest-cost {
        font-size: 1.625em;
        text-align: right;
    }

    .rate-compare-container {
        .grid_column( 6 );

        position: relative;
        margin-bottom: unit( 10px / @base-font-size-px, em );
    }

    .dollar-input,
    .percent-input {
        position: relative;

        input {
            width: 100%;
            box-sizing: border-box;
            padding-left: unit( 15px / @base-font-size-px, em );
        }

        .unit {
            position: absolute;
            z-index: 9;
            top: 0.5em;
            left: 5px;
            display: block;
            color: @gray-80;
        }
    }

    .percent-input {
        input {
            padding-left: unit( 4px / @base-font-size-px, em );
        }

        .unit {
            right: 20%;
            left: auto;
        }
    }

    .down-payment {
        margin-top: 0;

        .dollar-input {
            display: inline-block;
            width: 65%;
        }

        .percent-input {
            display: inline-block;
            width: 32%;
        }
    }

    .arm-info-comparison {
        .u-webfont-regular();

        position: absolute;
        display: block;
        width: 200%;
        padding: 1em 0;
        font-size: 0.75em;
    }

    /*
        "Next steps"
        --------------------------- */
    .next-steps {
        margin-top: 5em;
        margin-bottom: 3.625em;

        .tabs {
            box-sizing: border-box;
            margin-top: 2em;
        }

        > p {
            margin-bottom: 55px;
        }
    }

    .next-steps-heading {
        margin-bottom: 1em;
        font-size: 1.125em;
        .u-webfont-regular();
    }


    .next-steps-list {
        .u-reset;

        position: relative;
        padding-left: 30px; // match the negative outdent of the numbering
        margin: 0;
        counter-reset: li;
        list-style: none;


        li {
            position: relative;
            .grid_column( 1, 3 );
        }
    }

    .next-steps-list > li:before {
        position: absolute;
        top: 1px;
        left: -30px;
        width: 20px;
        height: 20px;
        background: @green-60;
        border-radius: 20px;
        color: @black;
        content: counter( li );
        counter-increment: li;
        font-size: 12px;
        line-height: 20px;
        text-align: center;
        .u-webfont-demi();
    }

    /*
        about
        --------------------------- */
    .about {
        border-top: 1px solid @gray-10;
        margin-top: 3.75em;
    }

    /*
        Alerts and warnings
        --------------------------- */
    .result-alert {
        border: 1px solid @red-60;
        background: #fff;
    }

    .chart-alert {
        position: absolute;
        top: 30%;
        padding: 1em 2em 1em 3em;
        background: #fff;
        .u-webfont-regular();

        .point-right {
            font-size: 1.5em;
        }
    }

    .credit-alert {
        padding: 0.714em 0.714em 0.714em 2.142em;
        margin: 2.5em 0 1em;
        background: @gray-5;
        color: @dark-gray;
        font-size: 0.75em;
    }

    .form-sub.warning {
        padding-top: 0;
        border-top: 0;
        margin-top: -20px;
    }

    .warning-text {
        padding-left: 1.2em;
    }

    .warning-text:before {
        .cf-icon;

        margin-right: 0.2em;
        color:  @gold;
        content: '\e103';
        text-indent: -1.2em;
    }

    .about-data {
        border-left-width: 0;
    }

    .related-links {
        margin-top: @grid_gutter-width;
    }

    /*
        Media queries
        --------------------------- */
    .respond-to-max( 720px, {

        .calculator,
        .rc-results {
            .grid_column( 12 );
            .grid_push( 0 );
        }

        .rc-home-illu {
            display: none;
        }

        .rc-illu-inner {
            padding: 0;
        }

        .next-steps-list li {
            position: relative;
            .grid_column( 12 );
        }
    } );

    .respond-to-max( 800px, {

        .rc-comparison-section {
            margin-top: 1.5em;
        }

        .rc-comparison-subsection {
            padding: 1em 0 0;
        }

        .rc-comp-1 {
            .grid_column( 2 );
        }

        .rc-comp-3 {
            .grid_column( 5 );
        }

        .rc-comp-3-push {
            .grid_column( @columns: 5; @prefix: 1; @suffix: 0 )
        }

        .rc-comp-5 {
            .grid_column( 12 );
        }

        .interest-cost {
            margin-bottom: .5em;
            .u-webfont-demi();
            color: @gray-60;
        }
    } );

    .respond-to-min( @bp-sm-max, {

        .page-intro_cols {
            display: table;
            .page-intro_col-left,
            .page-intro_col-right {
                display: table-cell;
            }

            .page-intro_col-right {
                padding-left: unit( ( @grid_gutter-width / 2 ) / @base-font-size-px, em );
                white-space: nowrap;
            }
        }
    } );

    .respond-to-min( 1000px, {
        .rate-checker-heading {
            width: 75%;
        }

        .caption-title {
            .grid_column( 7 );
        }

        .rc-data-link {
            .grid_column( 5 );

            margin-top: 0;
            text-align: right;
        }
    } );

    .respond-to-max( @bp-lg-max, {

        .half-width-gt-1230 {
            .grid_column( 12 );
        }

        .down-payment {
            margin-top: unit( 20px / @base-font-size-px, em );
        }
    } );

    @media( -webkit-min-device-pixel-ratio: 2),
        ( min-resolution: 192dpi ) {
        .rangeslider__handle {
            width: 22px;
            height: 21px;
            border: 0;
            background: transparent
                        url( '@{image_path}/slider-handle@2x.png' )
                        no-repeat
                        0
                        0;
            background-size: 100%;

            &.warning {
                width: 22px;
                height: 21px;
                background: transparent
                            url( '@{image_path}/slider-handle@2x.png' )
                            no-repeat
                            0
                            100%;
                background-size: 100%;
            }
        }
    }

    // Print styles
    @media print {
        .rangeslider,
        .credit-score .labels {
            display: none;
        }
    }

    @media print {
        .rc-illu-inner {
            display: none;
        }
    }

    @media print {
        .calculator,
        .rc-results {
            .grid_column( 12 );
            .grid_push( 0 );
        }
    }

    @media print {
        .calculator section {
            display: inline-block;
            width: 100%;
        }
    }
}
