// BEGIN CF4 CORE - TODO: delete when CFV4 is added to package.json

/* ==========================================================================
   Capital Framework
   Utilities
   ========================================================================== */

//
// JS-only
//

.u-js-only {
    .no-js & {
        display: none !important;
    }
}

//
// Clearfix
//

.u-clearfix {
    &:after {
        content: "";
        display: table;
        clear: both;
    }

    .lt-ie8 & {
        zoom: 1; // For IE 6/7 (triggers hasLayout)
    }
}

//
// Visually hidden
//

.u-visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    border: 0;
    margin: -1px;
    padding: 0;
    overflow: hidden;
    // `clip` is deprecated, but retained for safety in making sure that this
    // utility works as expected for screenreaders. Comma-separated syntax is
    // not used because space-separated is more backward-compatible,
    // per https://developer.mozilla.org/en-US/docs/Web/CSS/clip
    clip: rect(0 0 0 0);
}

//
// Inline block
//

.u-inline-block {
    display: inline-block;

    .lt-ie8 & {
        // Hack inline-block into submission
        display: inline;
    }
}

//
// Floating right
//

.u-right {
    float: right;
}

//
// Break word
//

.u-break-word {
    word-break: break-all;
}

//
// Align with button
//

.u-align-with-btn( @font-size: @base-font-size-px ) {
    display: inline-block;
    line-height: normal;
    vertical-align: middle;
}

//
// Flexible proportional containers
//

.u-flexible-container-mixin( @width: 16, @height: 9 ) {
    @ratio: ( @height / @width ) * 100;

    position: relative;
    padding-bottom: ~"@{ratio}%";
    height: 0;
}

.u-flexible-container {
    .u-flexible-container-mixin();

    &_inner {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }

    &__4-3 {
        .u-flexible-container-mixin( 4, 3 );
    }
}

//
// Link mixins
//

.u-link__colors() {
    .u-link__colors-base();
}

.u-link__colors( @c ) {
    .u-link__colors-base( @c, @c, @c, @c, @c,
                          @c, @c, @c, @c, @c );
}

.u-link__colors( @c, @h ) {
    .u-link__colors-base( @c, @c, @h, @h, @c,
                          @c, @c, @h, @h, @c );
}

.u-link__colors( @c, @v, @h, @f, @a ) {
    .u-link__colors-base( @c, @v, @h, @f, @a,
                          @c, @v, @h, @f, @a );
}

.u-link__colors( @c, @v, @h, @f, @a,
                 @bc, @bv, @bh, @bf, @ba ) {
    .u-link__colors-base( @c, @v, @h, @f, @a,
                          @bc, @bv, @bh, @bf, @ba );
}

.u-link__colors-base( @c:  @link-text,
                      @v:  @link-text-visited,
                      @h:  @link-text-hover,
                      @f:  @link-text,
                      @a:  @link-text-active,
                      @bc: @link-underline,
                      @bv: @link-underline-visited,
                      @bh: @link-underline-hover,
                      @bf: @link-underline,
                      @ba: @link-underline-active ) {
    color: @c;
    border-color: @bc;

    &:visited,
    &.visited {
        border-color: @bv;
        color: @v;
    }

    &:hover,
    &.hover {
        border-color: @bh;
        color: @h;
    }

    &:focus,
    &.focus {
        border-color: @bf;
        color: @f;
    }

    &:active,
    &.active {
        border-color: @ba;
        color: @a;
    }
}

.u-link__border() {
    border-bottom-width: 1px;
}

.u-link__no-border() {
    border-bottom-width: 0 !important;
}

.u-link__hover-border() {
    border-bottom-width: 0 !important;

    &:hover,
    &.hover,
    &:focus,
    &.focus {
        border-bottom-width: 1px !important;
    }
}

//
// Margin utilities
//

.u-mt0  { margin-top:    0 !important; }
.u-mb0  { margin-bottom: 0 !important; }
.u-mt5  { margin-top:    5px !important; }
.u-mb5  { margin-bottom: 5px !important; }
.u-mt10 { margin-top:    10px !important; }
.u-mb10 { margin-bottom: 10px !important; }
.u-mt15 { margin-top:    15px !important; }
.u-mb15 { margin-bottom: 15px !important; }
.u-mt20 { margin-top:    20px !important; }
.u-mb20 { margin-bottom: 20px !important; }
.u-mt30 { margin-top:    30px !important; }
.u-mb30 { margin-bottom: 30px !important; }
.u-mt45 { margin-top:    45px !important; }
.u-mb45 { margin-bottom: 45px !important; }
.u-mt60 { margin-top:    60px !important; }
.u-mb60 { margin-bottom: 60px !important; }

//
// Width utilities
//

.u-w100pct { width: 100%; }
.u-w90pct  { width: 90%; }
.u-w80pct  { width: 80%; }
.u-w70pct  { width: 70%; }
.u-w60pct  { width: 60%; }
.u-w50pct  { width: 50%; }
.u-w40pct  { width: 40%; }
.u-w30pct  { width: 30%; }
.u-w20pct  { width: 20%; }
.u-w10pct  { width: 10%; }
.u-w75pct  { width: 75%; }
.u-w25pct  { width: 25%; }
.u-w66pct  { width: unit( ( 2 / 3 ) * 100, % ); }
.u-w33pct  { width: unit( ( 1 / 3 ) * 100, % ); }

//
// Width-specific display
//

.u-hide-on-mobile {
    .respond-to-max( @bp-xs-max {
        display: none;
    } );
}

.u-show-on-mobile {
    display: none;

    .respond-to-max( @bp-xs-max {
        display: block;
    } );
}

//
// Small text utility
//

.u-small-text( @context: @base-font-size-px ) {
    font-size: unit( 14px / @context, em );
}

small,
.u-small-text {
    .u-small-text();
}

// END CF4 CORE

// TODO: Determine if the below utilities can be migrated to CFv4.

/* topdoc
  name: Width utilities
  family: cf-utilities
  patterns:
    - name: Percent-based
      markup: |
        <div class="u-w95pct" style="background: #DBEDD4; margin-bottom: 1px;">
            <code>.u-w95pct</code>
        </div>
        <div class="u-w85pct" style="background: #DBEDD4; margin-bottom: 1px;">
            <code>.u-w85pct</code>
        </div>
        <div class="u-w65pct" style="background: #DBEDD4; margin-bottom: 1px;">
            <code>.u-w65pct</code>
        </div>
        <div class="u-w55pct" style="background: #DBEDD4; margin-bottom: 1px;">
            <code>.u-w55pct</code>
        </div>
        <div class="u-w45pct" style="background: #DBEDD4; margin-bottom: 1px;">
            <code>.u-w45pct</code>
        </div>
        <div class="u-w35pct" style="background: #DBEDD4; margin-bottom: 1px;">
            <code>.u-w35pct</code>
        </div>
        <div class="u-w15pct" style="background: #DBEDD4; margin-bottom: 1px;">
            <code>.u-w15pct</code>
        </div>
        <div class="u-w5pct" style="background: #DBEDD4; margin-bottom: 1px;">
            <code>.u-w5pct</code>
        </div>
      notes:
        - "Inline styles are for demonstration purposes only, please don't use
           them."
  tags:
    - cfgov-cf-enhancements
*/

.u-w95pct  { width: 95%; }
.u-w85pct  { width: 85%; }
.u-w65pct  { width: 65%; }
.u-w55pct  { width: 55%; }
.u-w45pct  { width: 45%; }
.u-w35pct  { width: 35%; }
.u-w15pct  { width: 15%; }
.u-w5pct   { width:  5%; }

/* topdoc
  name: Centered on mobile utility
  family: cfgov-cf-enhancements
  patterns:
    - name: .u-centered-on-mobile
      markup: |
        <div>
            <div class="u-centered-on-mobile" style="width:100px;height:100px;background-color:green;">
                Block centered on mobile
            </div>
            <p class="u-centered-on-mobile">Paragraph centered on mobile</p>
        </div>
      notes:
        - "Sometimes content (parts/all of a media block, for example)
           should be centered on mobile, but not on larger screen sizes."
        - "This implementation conflates inline & block element centering,
           though they could be made into separate classes."
  tags:
    - cfgov-cf-enhancements
*/

.respond-to-max(@bp-xs-max, {
    .u-centered-on-mobile {
        margin-left: auto;
        margin-right: auto;
        text-align: center;
    }
});

/* topdoc
  name: Reset all
  family: cf-core
  patterns:
    - name: .u-reset
      markup: |
        <fieldset class="u-reset">
        </fieldset>
      notes:
        - "A class to remove any default spacing or borders on an element."
  tags:
    - cf-utilities
*/

.u-reset {
    border: 0;
    margin: 0;
    padding: 0;
}

/* topdoc
  name: Hide only when JS is active
  family: cf-core
  patterns:
    - name: .js-is-hidden
      markup: |
        <fieldset class="js-reveal-with-js-class u-hide-js-only">
        </fieldset>
      notes:
        - "A class to hide only when JS is active."
  tags:
    - cf-utilities
*/

.js-is-hidden {
    display: none !important;
    .no-js & {
        display: block;
    }
}

/* topdoc
  name: Hidden
  family: cf-core
  patterns:
    - name: Utility class
      markup: |
        <span class="u-hidden">Not shown</span>
      codenotes:
        - .u-hidden;
      notes:
        - "Use this class to hide something from everything.
           Useful if you want to show it using JS after
           checking for browser-support."
  tags:
    - cf-core
*/

.u-hidden {
    display: none;
}

/* topdoc
  name: Hidden Overflow
  family: cf-core
  patterns:
    - name: Utility class
      markup: |
        <div class="u-hidden-overflow"></div>
      codenotes:
        - .u-hidden-overflow;
      notes:
        - "Use this class to hide content outside the bounds of an element.
           Used for cropping views in multi-level menus."
  tags:
    - cf-core
*/

.u-hidden-overflow {
    overflow: hidden;
}

/* topdoc
  name: Invisible
  family: cf-core
  patterns:
    - name: Utility class
      markup: |
        <span class="u-invisible">Not shown</span>
      codenotes:
        - .u-invisible;
      notes:
        - "Use this class to make something invisible.
           Useful for hiding off-screen elements that
           are part of an animation, but you don't want
           as part of the tabindex."
  tags:
    - cf-core
*/

.u-invisible {
    visibility: hidden;
}

/* topdoc
  name: Disabled link
  family: cf-core
  patterns:
    - name: Utility class
      markup: |
        <a class="u-link__disabled">
          This link is disabled.
        </div>
      codenotes:
        - .u-link__disabled;
      notes:
        - "Use this as a general class to give links
           or button links disabled styling.
           Sets the color, background-color,
           removes the border, and sets the cursor to not-allowed."
  tags:
    - cf-core
*/
.u-link__disabled {
    border: none !important;
    color: @gray-40 !important;
    cursor: not-allowed !important;

    &.btn {
        background-color: @gray-20 !important;
    }
}

/* topdoc
  name: EOF
  eof: true
*/
