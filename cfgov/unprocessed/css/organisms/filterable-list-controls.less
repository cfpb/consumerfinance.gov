.o-filterable-list-controls {
  // The filterable list controls is an expandable, which uses a max-height
  // transition that has the properties overflow:hidden and contain:paint set.
  // This means nothing outside of the expandable bounds will be painted,
  // which is good for performance, but is bad for things like drop-down menus
  // that overflow the expandable bounds.
  //
  // The solution below makes the multiselect drop-down not "float", like it
  // normally does, so that it expands to occupy space in the filterable list
  // controls expandable, and therefore will not float outside of the controls'
  // bounds.
  // TODO: While this fixes the multiselect drop-down being cropped, it does
  //       change the UX. A method to support overflowing the expandable bounds
  //       while still retaining performance optimizations should be explored.
  .o-multiselect__fieldset {
    position: static;
  }
}

// Hide the buttons on htmx boosted forms
html.js form[hx-boost] {
  .m-btn-group {
    display: none;
  }
}

// htmx animated progress bar
// See https://htmx.org/attributes/hx-indicator/
.htmx-progress {
  display: none;

  .htmx-request & {
    display: inline;
  }

  position: fixed;
  top: 0;
  z-index: 1000;
  height: unit((5px / @base-font-size-px), rem);
  width: 100%;

  .htmx-progress-bar {
    background-color: var(--pacific);

    &::before,
    &::after {
      content: '';
      position: absolute;
      background-color: inherit;
      top: 0;
      left: 0;
      bottom: 0;
      will-change: left, right;
      animation: indeterminate 2.5s cubic-bezier(0.65, 0.815, 0.735, 0.395)
        infinite;
    }
    &::after {
      animation-name: indeterminate-short;
    }
  }
}

@keyframes indeterminate {
  0% {
    left: -35%;
    right: 100%;
  }
  40% {
    left: 100%;
    right: -90%;
  }
  100% {
    left: 100%;
    right: -90%;
  }
}

@keyframes indeterminate-short {
  0% {
    left: -200%;
    right: 100%;
  }
  40% {
    left: 107%;
    right: -8%;
  }
  100% {
    left: 107%;
    right: -8%;
  }
}

// Dim search results while inflight
.htmx-request {
  opacity: 0.5;
}
