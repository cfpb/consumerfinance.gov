/* topdoc
  name: Expandable read more modifier
  family: cf-organisms
  notes:
    - "Styles a one-way Expandable organism that previews content on mobile."
  patterns:
  - name: Expandable organism
    markup: |
      <div class="o-expandable o-expandable__read-more" data-read-more="true">
          <div class="o-expandable_content" aria-expanded="false">
          </div>
          <button class="o-expandable_header o-expandable_target"
                  title="Expand content">
              <span class="o-expandable_link">
                  <span class="o-expandable_cue o-expandable_cue-open">
                      Read full answer
                      {{ svg_icon('plus-round') }}
                  </span>
                  <span class="o-expandable_cue o-expandable_cue-close">
                      Hide full answer
                      {{ svg_icon('minus-round') }}
                  </span>
              </span>
          </button>
      </div>
    codenotes:
      - |
        Pattern structure
        -----------------
        .o-expandable
          .o-expandable_content
          .o-expandable_header.o-expandable_target
            .o-expandable_link
              .o-expandable_cue.o-expandable_cue-open
              .o-expandable_cue.o-expandable_cue-close

    notes:
      - "One-way expandable. Displays an approximately 4-line
         preview of content on mobile screen sizes only. "
  - name: .o-expandable__read-more (modifier)
  tags:
  - cf-organisms
*/

.o-expandable__read-more {
    .o-expandable_target__collapsed {
        display: none;
    }

    .o-expandable_content__collapsed {
        max-height: 100% !important;

        &:after {
            display: none;
        }
    }

    @media only screen and (max-width:@bp-xs-max) {
        .o-expandable_target__collapsed {
            display: block;

            .o-expandable_link {
                display: block;
                padding-top: 15px;
                padding-bottom: 15px;
                border: dotted @link-text;
                border-width: 1px 0;
                text-align: center;
            }
        }

        .o-expandable_target__expanded {
            display: none;
        }

        .o-expandable_content__collapsed {
            // shows approx. 4 lines of content
            max-height:  unit( @base-line-height-px * 4 / @base-font-size-px, em ) !important;
            overflow: hidden;
            position: relative;

            &:after {
                // fades content out over approx. 2 lines
                display: block;
                height: unit( @base-line-height-px * 2 / @base-font-size-px, em );
                margin: 0;
                position: absolute;
                bottom: 0;
                left: 0;
                right: 0;
                background: linear-gradient(to bottom, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100% );
                content: '';
            }
        }
    }
}
