<!--

Do not edit this file manually!

The contents of this file are generated automatically as part of this project's
documentation build process.

StreamField block and model information is extracted from the Python source
code. To modify this file's layout, see the Markdown template file at:

cfgov/core/jinja2/core/docs/streamfield-blocks.md.

To regenerate this file, run the following Django management command from
the project root when inside of a Python environment:

cfgov/manage.py generate_streamfield_docs -o docs/streamfield-blocks.md

These instructions are duplicated at
[Updating the documentation](../development-tips/#tip-updating-the-documentation).

-->
# StreamField blocks

This project makes use of
[Wagtail StreamFields](http://docs.wagtail.io/en/v1.13.4/topics/streamfield.html)
to allow page editors to enter freeform page content.

## Table of contents

[TOC]

## StreamField block types by module

This project includes numerous
[custom StreamField block types](http://docs.wagtail.io/en/v1.13.4/topics/streamfield.html#structural-block-types)
that allow for consistent use of design patterns across the website. Many of
these blocks implement patterns described by the
[CFPB Design Manual](https://cfpb.github.io/design-manual/).

{% set moduleblocks = blocks|sort(attribute='module')|groupby('module') -%}
{% for module, blocks in moduleblocks %}
### `{{ module }}`

{% for block in blocks|sort(attribute='name') -%}
#### {{ block.name }}

- Module: `{{ block.fullname }}`
- Template: `{{ block.template|default('none') }}`
{% if block.fields %}
- Available in:
{% for field in block.fields|sort %}
    - `{{ field }}`
{%- endfor %}
{%- endif %}

{% if block.docstring %}
{{ block.docstring }}
{%- endif %}
{%- endfor %}

{%- endfor %}

{% macro showmodels(models) -%}
{% for model in models|sort(attribute='name') -%}
#### {{ model.name }}

- Module: `{{ model.fullname }}`
- StreamFields:
{% for field in model.streamfields %}
    - `{{ field.name }}`{% if field.required %} (required){% endif %}
{%- endfor %}

{% if model.docstring -%}
{{ model.docstring }}
{%- endif %}

{% endfor %}
{%- endmacro %}

## Wagtail Page types containing StreamFields

Most of the StreamField blocks listed above can be inserted into one or more
fields on the various custom
[Wagtail Page models](http://docs.wagtail.io/en/v1.13.4/topics/pages.html)
included in this project.

{{ showmodels(models|selectattr('ispage')) }}

## Django models containing StreamFields

Other blocks exist for insertion on StreamFields that live on non-Page
Django models.

{{ showmodels(models|rejectattr('ispage')) }}
