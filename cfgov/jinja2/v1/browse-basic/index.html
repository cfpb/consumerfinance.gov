{% extends 'layout-side-nav.html' %}

{# Import organisms and molecules used in the template. #}
{% import 'molecules/expandable.html' as expandable %}
{% import 'molecules/social-media.html' as social_media %}

{% import 'organisms/expandable-group.html' as expandable_group %}

{% if not page %}
    {% do global_dict.update({
            'page':  {
                'seo_title': 'This is a prototype page for testing landing page layouts.',
                'related_posts': global_dict.related_posts_function
            },
            'related_posts_settings': {
                'value': {
                    'limit':            3,
                    'show_heading':     true,
                    'related_posts':    false,
                    'related_newsroom': false,
                    'related_events':   false,
                }
            },
            'prototype': true
        })
    %}
    {% set page = page or global_dict.page %}
    {% set prototype = global_dict.prototype or false %}
    {% set breadcrumb_items = [('#', '#', 'Sample Breadcrumb')] %}
{% endif %}

{% import 'molecules/related-posts.html' as related_posts with context %}
{% if not breadcrumb_items %}
    {% set parent = page.parent() %}
    {% set breadcrumb_items = [(parent.url, parent.url, parent.title)] %}
{% endif %}

{% block title -%}
    {{ page.seo_title }}
{%- endblock %}

{% block content_main %}
    {% do global_dict.update({ 'full_width_sans': true }) %}

    <div class="block">
        {{ social_media.render() }}
    </div>

    {% for block in page.header -%}
        <div class="block">
            {{ render_stream_child(block) }}
        </div>
    {%- endfor %}

    {% for block in page.content -%}
        <div class="block">
            {{ render_stream_child(block) }}
        </div>
    {%- endfor %}

    {% if prototype %}
        <div class="block">
            {% include 'organisms/full-width-text.html' %}

            <div class="expandable-prototypes">
                {% include 'molecules/expandable.html' with context %}
            </div>

            <div class="expandable-group-prototypes">
                {% include 'organisms/expandable-group.html' with context %}
            </div>

        </div>
    {% endif %}

    {% if prototype %}
        {{ related_posts.render(global_dict.related_posts_settings) }}
        {% include 'organisms/email-signup.html' %}
    {% else %}
        {% for block in page.sidefoot %}
            <div class="block block__flush-top">
                {% if 'related_posts' in block.block_type %}
                    {{ related_posts.render(block) }}
                {% else %}
                    {% if 'heading' in block.block_type %}
                        <h3 class="o-sidebar-breakout_heading">
                            {{ render_stream_child(block) }}
                        </h3>
                    {% elif 'slug' in block.block_type %}
                        <h2 class="header-slug">
                            <span class="header-slug_inner">
                                {{ render_stream_child(block) }}
                            </span>
                        </h2>
                    {% elif 'paragraph' in block.block_type %}
                        <div class="short-desc">
                            {{ render_stream_child(block) }}
                        </div>
                    {% else %}
                        {{ render_stream_child(block) }}
                    {% endif %}
                {% endif %}
            </div>
        {% endfor %}
    {% endif %}


    {# TODO: Remove the below when input-contains-label
             class is added cf-enhancements. #}
    <div class="block">
        <div class="block">
            <div class="input-contains-label">
                <label for="search-input1"
                       class="input-contains-label_before
                              input-contains-label_before__search">
                </label>
                <label for="search-input1"
                       class="input-contains-label_after
                              input-contains-label_after__clear">
                </label>
                <input id="search-input1"
                       type="text"
                       value="This is some really long text to make sure that the button doesn't overlap the content in such a way that this input becomes unusable.">
            </div>
        </div>

        <div class="block">
            <div class="input-contains-label
                        input__super">
                <label for="search-input2"
                       class="input-contains-label_before
                              input-contains-label_before__search">
                </label>
                <label for="search-input2"
                       class="input-contains-label_after
                              input-contains-label_after__clear">
                </label>
                <input class="input__super"
                       id="search-input2"
                       type="text"
                       value="This is some really long text to make sure that the button doesn't overlap the content in such a way that this input becomes unusable.">
            </div>
        </div>


        <div class="input-with-btn">
            <div class="input-with-btn_input
                        input-contains-label">
                <label for="search-input3"
                       class="input-contains-label_before
                              input-contains-label_before__search">
                </label>
                <label for="search-input3"
                       class="input-contains-label_after
                              input-contains-label_after__clear">
                </label>
                <input type="text"
                       id="search-input3"
                       value="This is some really long text to make sure that the button doesn't overlap the content in such a way that this input becomes unusable.">
            </div>
            <div class="input-with-btn_btn">
                <button class="btn">Search</button>
            </div>
        </div>

        <div class="input-with-btn">
            <div class="input-with-btn_input
                        input-contains-label
                        input__super">
                <label for="search-input4"
                       class="input-contains-label_before
                              input-contains-label_before__search">
                </label>
                <label for="search-input4"
                       class="input-contains-label_after
                              input-contains-label_after__clear">
                </label>
                <input class="input__super"
                       type="text"
                       id="search-input4"
                       value="This is some really long text to make sure that the button doesn't overlap the content in such a way that this input becomes unusable.">
            </div>
            <div class="input-with-btn_btn">
                <button class="btn btn__super">Search</button>
            </div>
        </div>

    </div>

{% endblock %}

{% block content_sidebar scoped -%}
    {% for block in page.side_navigation -%}
        <div class="block">
            {{ render_stream_child(block) }}
        </div>
    {%- endfor %}
{%- endblock %}
