{% extends "base.html" %}

{% block title -%}
    Consumer Financial Protection Bureau
{%- endblock %}

{% block preload %}
    {{ super() }}
    <link rel="preload"
          href="{{ static('img/home-hero_sm.jpg') }}"
          as="image"
          media="(max-width: 600px)">
    <link rel="preload"
          href="{{ static('img/home-hero_lg.jpg') }}"
          as="image"
          media="(min-width: 601px)">
{%- endblock %}


{% block desc -%}
    Our vision is a consumer finance marketplace that works for American consumers,
    responsible providers, and the economy as a whole.
{%- endblock %}

{% block content %}

    <main class="content" id="main">

        {% from 'molecules/home-hero.html' import home_hero with context %}
        {{ home_hero( {
            'heading': 'We’re the CFPB',
            'body':    'The Consumer Financial Protection Bureau is a
                        U.S. government agency that makes sure banks,
                        lenders, and other financial companies treat you fairly.',
            'sm_img':  'img/home-hero_sm.jpg',
            'lg_img':  'img/home-hero_lg.jpg'
        } ) }}

        {% from 'molecules/info-unit.html' import info_unit with context %}
        <div class="o-well
                    o-well__home">
            <header class="m-slug-header">
                <h2 class="a-heading">
                    Featured
                </h2>
            </header>
            <div class="content-l">
                {% for block in page.header %}
                    <section class="content-l_col content-l_col-1-2">
                        {{ render_stream_child(block) }}
                    </section>
                {% endfor %}
            </div>
        </div>

        <div class="wrapper">
            <div class="content_main content_main__home">
                <div class="content-l">
                    <section class="content-l_col
                                    content-l_col-1-3__on-lg">
                        {{ info_unit( {
                            'modifier': 'home',
                            'image': {
                                'url': static('img/home-complaint_150.png'),
                                'is_square': true,
                                'is_decorative': true
                            },
                            'heading': '<h2>Submit a complaint</h2>',
                            'body': '<p>Can’t fix a problem with a financial product or service? Submit a complaint. We’ll work to get you a response from the company.</p>',
                            'links': [
                                {
                                    'text': 'Submit your complaint',
                                    'url':  '/complaint/'
                                },
                                {
                                    'text': 'Browse public complaints about companies',
                                    'url':  '/complaintdatabase/'
                                }
                            ]
                        } ) }}
                    </section>
                    <section class="content-l_col
                                    content-l_col-1-3__on-lg">
                        {{ info_unit( {
                            'modifier': 'home',
                            'image': {
                                'url': static('img/home-answers_150.png'),
                                'is_square': true,
                                'is_decorative': true
                            },
                            'heading': '<h2>Get answers to money questions</h2>',
                            'body': '<p>Financial matters can be complicated. Get the facts you need to make choices about money, credit scores, mortgages, and more.</p>',
                            'links': [
                                {
                                    'text': 'Find answers to common questions',
                                    'url':  '/ask-cfpb/'
                                }
                            ]
                        } ) }}
                    </section>
                    <section class="content-l_col
                                    content-l_col-1-3__on-lg">
                        {{ info_unit( {
                            'modifier': 'home',
                            'image': {
                                'url': static('img/home-goals_150.png'),
                                'is_square': true,
                                'is_decorative': true
                            },
                            'heading': '<h2>Reach your financial goals</h2>',
                            'body': '<p>For the big financial decisions in your life, we offer free tools and resources to help you reach your goals.</p>',
                            'links': [
                                {
                                    'text': 'Paying for College',
                                    'url':  '/paying-for-college/'
                                },
                                {
                                    'text': 'Buying a House',
                                    'url':  '/owning-a-home/'
                                },
                                {
                                    'text': 'Planning for Retirement',
                                    'url':  '/retirement/before-you-claim/'
                                }
                            ]
                        } ) }}
                    </section>
                </div>
            </div>
        </div>

        <div class="o-well
                    o-well__home">
            <h2>Standing up for you</h2>
            <div class="content-l
                        content-l__large-gutters">
                <section class="content-l_col
                                content-l_col-1-2">
                    <h3>We hold companies accountable for illegal practices</h3>
                    <div class="content-l">
                        <div class="content-l_col content-l_col-1-2__on-lg">
                            <div class="m-card">
                                <h3 class="h1 m-card_heading">$12.4 billion in relief</h3>
                                <p class="m-card_body">to consumers from our enforcement actions</p>
                            </div>
                        </div>
                        <div class="content-l_col content-l_col-1-2__on-lg">
                            <div class="m-card">
                                <h3 class="h1 m-card_heading">31 million+ consumers</h3>
                                <p class="m-card_body">will receive relief because of our actions</p>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="content-l_col
                                content-l_col-1-2
                                content-l_col__before-divider">
                    <h3>We listen to consumers and make their voices heard</h3>
                    <div class="content-l">
                        <div class="content-l_col content-l_col-1-2__on-lg">
                            <div class="m-card">
                                <h3 class="h1 m-card_heading">1.5 million+ complaints</h3>
                                <p class="m-card_body">we’ve handled from consumers</p>
                            </div>
                        </div>
                        <div class="content-l_col content-l_col-1-2__on-lg">
                            <div class="m-card">
                                <h3 class="h1 m-card_heading">97% of consumers</h3>
                                <p class="m-card_body">get timely replies when we send their complaints to companies</p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <p style="margin-top: 30px;margin-bottom: 0;">Figures are updated quarterly. Last update on 06/04/2018</p>
        </div>

        <div class="wrapper">
            <div class="content_main content_main__home">
                <h2>Latest updates</h2>
                <div class="content-l">
                    {% for sections in page.latest_updates %}
                        <section class="content-l_col
                                        content-l_col-1-3">
                            {% for block in sections.value %}
                                {# TODO: Refactor to not use m-list.
                                         It's only used to make the links bold.
                                         It should either be a list or not. #}
                                <div class="m-related-posts_list-container m-list">
                                    <h3 class="h4">
                                        {% set icon = 'open-quote' if block.categories == 'double-quote' else block.categories %}
                                        {{ svg_icon(icon) }}
                                        {{ page.get_category_name(block.categories) }}
                                    </h3>
                                    <a class="m-list_link" href="{{ block.link.url }}">
                                        {{ block.link.text }}
                                    </a>
                                    <p class="a-date">
                                        {% import 'macros/time.html' as time %}
                                        {{ time.render(block.date, {'date':true}) }}
                                    </p>
                                </div>
                            {% endfor %}
                        {% if loop.last %}
                            <div class="m-related-posts_list-container">
                                <a class="a-link
                                          a-link__jump"
                                   href="/activity-log/">
                                    See all updates
                                </a>
                            </div>
                        {% endif %}
                        </section>
                    {% endfor %}
                </div>

                <div class="content-l">
                    <section class="content-l_col
                                    content-l_col-1-3">
                        {% import 'macros/time.html' as time %}
                        {% for update_page in latest_updates %}

                            {# TODO: Refactor to not use m-list.
                                        It's only used to make the links bold.
                                        It should either be a list or not. #}

                            <div class="m-related-posts_list-container m-list">
                                <h3 class="h4">
                                    {% set icon = 'open-quote' %} {# if block.categories == 'double-quote' else block.categories %} #}
                                    {{ svg_icon(icon) }}
                                    {# {{ page.get_category_name(block.categories) }} #}
                                </h3>
                                <a class="m-list_link" href="{{ update_page.get_url() }}">
                                    {{ update_page.title }}
                                </a>
                                <p class="a-date">
                                {{ time.render(update_page.first_published_at, {'date':true}) }}
                                </p>
                            </div>

                        {% endfor %}

                        <div class="m-related-posts_list-container">
                            <a class="a-link
                                        a-link__jump"
                                href="/activity-log/">
                                See all updates
                            </a>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </main>

{% endblock content %}
