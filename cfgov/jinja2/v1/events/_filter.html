{%- import 'macros/active-filters.html' as active_filters with context %}
{% set active_filters_markup = active_filters.render(events, filters, {'expand_label': 'Filter posts'}) %}
{% set is_expanded = active_filters_markup | trim | length > 0 %}

<div class="expandable
            expandable__filters
            expandable__padded
            {{ 'expandable__expanded' if is_expanded else '' }}
            js-post-filter">
    <button class="expandable_header expandable_target">
        <span class="expandable_header-left expandable_label">
            Filter
        </span>
        <span class="expandable_header-right expandable_link">
            <span class="expandable_cue-open">
                Show
              <span class="cf-icon cf-icon-plus-round"></span>
            </span>
            <span class="expandable_cue-close">
                Hide
                <span class="cf-icon cf-icon-minus-round"></span>
            </span>
        </span>
    </button>
    <div class="expandable_content">
        <form method="get">
            <div class="form-l form-l__float form-l__flush">
            {# Date range filters #}
                <div class="form-l_col form-l_col-2-3">
                  <div class="form-l form-l__flush">
                    <label class="form-l_col-1 form-label-header">
                        Date range
                    </label>
                    {#
                        =================
                        "From" date input
                        =================
                    #}
                    <div class="form-l_col form-l_col-1-2">
                        <label for="from_date">
                            From <span class="date_label">(YYYY-MM)</span>:
                        </label>
                        {{ form.from_date }}
                    </div>
                    {#
                        ===============
                        "To" date input
                        ===============
                    #}
                    <div class="form-l_col form-l_col-1-2">
                        <label for="to_date">
                            To <span class="date_label">(YYYY-MM)</span>:
                        </label>
                        {{ form.to_date }}
                    </div>
                  </div>
                </div>
            {# Tag filters #}
                <div class="form-l_col form-l_col-1-3">
                    <label class="form-label-header" for="topics">
                        Topics
                    </label>
                    {{ form.topics }}
                </div>
            </div> <!-- END .form-l__flush -->

            <div class="form-actions form-actions__right-on-med">
                <input class="btn btn__warning btn__link form-actions_item js-form_clear"
                       type="button"
                       value="Reset filters">
                <input class="btn form-actions_item"
                       type="submit"
                       value="Apply filters">
            </div>

        </form>
    </div>
</div>

{{ active_filters_markup }}
