{# ==========================================================================

   sidenav_toc.render()

   ==========================================================================

   Description:

   Creates markup for sidenav table of contents

   ========================================================================== #}

{% macro render() %}
  {{ _render_secondary_navigation() }}
{% endmacro %}

{# ==========================================================================

   _render_secondary_navigation()

   ========================================================================== #}
{% macro _render_secondary_navigation() %}

<nav class="o-report-sidenav o-secondary-navigation o-secondary-navigation__no-children"
     aria-label="Section navigation">
      {% import 'molecules/nav-link.html' as nav_link %}
      <h3>Table of contents</h3>
      <ul class="m-list
                 m-list__unstyled
                 o-secondary-navigation_list
                 o-secondary-navigation_list__parents">
       {%- for item in toc_headers %}
           <li class="m-list_item">
             {{ nav_link.render(item.id + " " + item.header, "#" + item.id, true) }}
	   {% if item.children %}
             <ul class="m-list
                        m-list__unstyled
                        o-secondary-navigation_list
                        o-secondary-navigation_list__children">
	     {%- for child in item.children %}
               <li class="m-list_item">
                 {{ nav_link.render(child.id + " " + child.header, "#" + child.id, false) }}
               </li>
	     {%- endfor %}
             </ul>
           {% endif %}
           </li>
       {%- endfor %}
      </ul>
</nav>
{% endmacro %}
