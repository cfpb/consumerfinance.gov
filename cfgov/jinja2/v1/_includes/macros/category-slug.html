
{# ==========================================================================

   category_slug.render()

   ==========================================================================

   Description:

   Render a category slug when given:

   category:            A category slug, e.g. "press-release".

   href (optional):     If present creates a link with
                        a path to which the category filter applies.
                        For example, if the slug is used on a blog article
                        then path should be '/about-us/blog/'.
                        Path is used to create the filtered URL:
                        {{ href }}?categories={{ category }}

   classes (optional): Space separated list of class names.

   ========================================================================== #}

{% macro render( category, href, classes='' ) %}
    {% import 'macros/category-icon.html' as category_icon %}

    {% if href %}
        {% set href = href + '?categories=' + category | urlencode %}
    {% endif %}

    {% call _category_link( href, classes ) -%}
        {% set category_name = category_label( category ) or category %}
        {{- category_icon.render( category_name ) }}
        <span class="u-visually-hidden">Category:</span>
        {{ category_name }}
    {%- endcall %}
{% endmacro %}

{% macro _category_link( href, classes ) %}
    {% if href %}
        <a href="{{ href }}"
           class="a-heading a-heading__icon {{ classes }}">
    {% endif %}
       {{ caller() }}
    {% if href %}
        </a>
    {% endif %}
{% endmacro %}
