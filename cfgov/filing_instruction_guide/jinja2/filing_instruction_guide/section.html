{% set block_type = block.block_type %}
{% set block_types = {
    'Fig_Section': {
        'heading': 'h2',
        'class': 'o-fig_section'
    },
    'Fig_Subsection': {
        'heading': 'h3',
        'class': 'o-fig_section__sub'
    },
    'Fig_Level_3_Subsection': {
        'heading': 'h4',
        'class': 'o-fig_section__sub-sub'
    },
} %}
{% set block_heading_level = block_types[block_type].heading | default('h4') %}
{% set block_class = block_types[block_type].class | default('o-fig_section') %}

{% if block_type in ['Fig_Section', 'Fig_Subsection'] %}
    {% set header = value.section_id + ". " + value.header %}
{% else %}
    {% set header = value.header %}
{% endif %}

<div class="{{ block_class }}" data-search-section data-scrollspy="{{ value.section_id }}">
    <{{ block_heading_level }}
        class="o-fig_heading">
        <a id="{{ value.section_id }}"
           href="#{{ value.section_id }}">
                {{ header }}
        </a>
    </{{ block_heading_level }}>
    {% for block in value.content %}
        {% if block.block_type == 'data_points_block' %}
            {% from 'filing_instruction_guide/data_points.html' import data_points as data_points with context %}
            {{ data_points(value.section_id) }}
        {% else %}
            {{ block | safe }}
        {% endif %}
    {% endfor %}
</div>
