{% extends 'layout-2-1-bleedbar.html' %}

{% import 'templates/streamfield-sidefoot.html' as streamfield_sidefoot with context %}
{% import 'templates/render_block.html' as render_block with context %}

{# HEAD items #}

{% block preload %}
    {{ super() }}
    <link rel="manifest" href="{{ static('apps/regulations3k/regulations3k-manifest.json') }}">
    <link rel="icon" sizes="192x192" href="{{ static('apps/regulations3k/img/regulations3k-icon-192.png') }}">
    <link rel="apple-touch-icon" sizes="192x192" href="{{ static('apps/regulations3k/img/regulations3k-icon-192.png') }}">
    <link rel="apple-touch-startup-image" href="{{ static('apps/regulations3k/img/regulations3k-icon-192.png') }}">
    <meta name="apple-mobile-web-app-title" content="Regs">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#20aa3f"/>
{%- endblock %}

{% block css -%}
    {{ super() }}
    <link rel="stylesheet" href="{{ static('apps/regulations3k/css/main.css') }}">
{%- endblock css %}

{# BODY items #}

{% block body_classes %}
    {{ super() }}  data-turbolinks="false"
{% endblock body_classes %}

{% block hero -%}
    {% for block in page.header -%}
        {{ render_block.render(block, loop.index) }}
    {%- endfor %}
{% endblock %}

{% block content_main scoped %}
    {% for block in page.content -%}
        {{ render_block.render(block, loop.index) }}
    {%- endfor %}
{% endblock content_main %}

{% block content_sidebar_modifiers -%}
    o-sidebar-content
{%- endblock %}

{% block content_sidebar scoped -%}
    {{ streamfield_sidefoot.render(page.sidefoot) }}
{%- endblock %}

{% block javascript scoped %}
    {{ super() }}
    <script async>
      if ( document.body.parentElement.className.indexOf( 'no-js' ) === -1 ) {
        !function(){
          {# Include site-wide JavaScript. #}
          var s = [
            '{{ static('apps/regulations3k/js/index.js') }}'
          ];
          jsl(s);
        }()
      }
    </script>
{% endblock javascript %}
