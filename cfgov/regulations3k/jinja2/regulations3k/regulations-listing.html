{# ==========================================================================

   Regulation listing

   ==========================================================================

   Description:

   Creates a table of regulations when given:

   regulations:    List of regulation part objects

   heading:        The heading of the regulations list.

   more_regs_page: A Wagtail page to link to in the more regulations link.

   more_regs_text: A string for the text of the more regulations link.

   ========================================================================== #}
{% if regulations.exists() %}
<div id="regulations-listing">
    <h4>{{ value.heading or 'Table of contents' }}</h4>
    <ul class="m-list m-list--links">
        {% for regulation in regulations %}
        <li class="m-list__item">
            <a class="a-link a-link--jump" href="{{ regulation.url }}">
                <span class="a-link__text">{{ regulation.title }}</span>
            </a>
            {% if regulation.regulation.future_versions %}
            <div class="new-version">
                <h5>New amendments effective</h5>
                <ul class="m-list m-list--links">
                {% for version in regulation.regulation.future_versions %}
                    <li class="m-list__item">
                        <a class="a-link a-link--jump" href="{{ regulation.url }}{{ version.effective_date|string }}/">
                            <span class="a-link__text">{{ ap_date(version.effective_date) }}</span>
                        </a>
                    </li>
                {% endfor %}
                </ul>
            </div>
            {% endif %}

        </li>
        {% endfor %}
    </ul>
    {% endif %}
    <p>
        <a class="" href="{{ pageurl(value.more_regs_page) }}">{{ value.more_regs_text or 'View more CFPB regulations' }}</a>
    </p>
</div>
