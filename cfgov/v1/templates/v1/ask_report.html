{% extends 'wagtailadmin/reports/base_page_report_results.html' %}

{% block results %}
    {% if object_list %}
        <table class="listing">
            <thead>
                <tr>
                    <th>
                        Ask ID
                    </th>
                    <th>
                        Page ID
                    </th>
                    <th>
                        Question
                    </th>
                    <th>
                        Title
                    </th>
                    <th>
                        Short answer
                    </th>
                    <th>
                        Answer
                    </th>
                    <th>
                        Meta description
                    </th>
                    <th>
                        URL
                    </th>
                    <th>
                        Live
                    </th>
                    <th>
                        Last edited
                    </th>
                    <th>
                        Portal topics
                    </th>
                    <th>
                        Primary portal topic
                    </th>
                    <th>
                        Portal categories
                    </th>
                    <th>
                        Related questions
                    </th>
                    <th>
                        Language
                    </th>
                </tr>
            </thead>
            <tbody>
                {% for page in object_list %}
                    <tr>
                        <td>
                            {{ page.answer_base.id }}
                        </td>
                        <td>
                            {{ page.id }}
                        </td>
                        <td>
                            {{ page.question | striptags }}
                        </td>
                        <td>
                            {{ page.title }}
                        </td>
                        <td>
                            {{ page.short_answer | striptags }}
                        </td>
                        <td style="color: #919395;">
                            See CSV
                        </td>
                        <td>
                            {{ page.search_description }}
                        </td>
                        <td>
                            {{ page.url }}
                        </td>
                        <td>
                            {{ page.live }}
                        </td>
                        <td>
                            {{ page.last_edited }}
                        </td>
                        <td>
                            {% for portal_topic in page.portal_topic.all %}
                                {{ portal_topic.heading }}
                                <br>
                            {% endfor %}
                        </td>
                        <td>
                            {{ page.primary_portal_topic }}
                        </td>
                        <td>
                            {% for portal_category in page.portal_category.all %}
                                {{ portal_category.heading }}
                                <br>
                            {% endfor %}
                        </td>
                        <td>
                            {% for question in page.related_questions.all %}
                                {{ question.id }}
                                <br>
                            {% endfor %}
                        </td>
                        <td>
                            {{ page.language }}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>There are no Ask pages to report.</p>
    {% endif %}
{% endblock %}
