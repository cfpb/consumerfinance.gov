
{# ==========================================================================

   Mortgage performance downloads

   ==========================================================================

   Description:

   A full width organism for automating display of mortgage data archives.

   ========================================================================== #}
{% set archive_30_60 = download_files[thru_month]['percent_30_60'] %}
{% set archive_90 = download_files[thru_month]['percent_90'] %}

<div class="o-full-width-text-group">
    <div class="m-full-width-text">
        <h2>The most recent data</h2>
        <p>We recommend using the most recent data, which include the full time series and all revisions. These data cover {{ from_month_formatted }}{{ '&ndash;' | safe }}{{ thru_month_formatted }}. Since this webpage’s December 2023 update, we use Connecticut’s new FIPS codes that changed in 2022 to nine county-equivalent boundaries.</p>
    </div>
</div>

<div class="block">
<table class="o-table">
    <thead>
        <tr>
            <th scope="col">
                <p>Metric</p>
            </th>
            <th scope="col">
                <p>States</p>
            </th>
            <th scope="col" class="u-w20pct">
                <p>Metro and non-metro areas</p>
            </th>
            <th scope="col" class="u-w20pct">
                <p>Counties</p>
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                <p>Mortgages 30&ndash;89 days delinquent</p>
            </td>
            <td>
                <p><a aria-label="Download latest CSV file of mortgages 30 to 60 days delinquent by state"
                        href="{{ archive_30_60['State']['url'] }}">
                    CSV</a>
                    ({{ archive_30_60['State']['size'] }})
                </p>
            </td>
            <td>
                <p><a aria-label="Download latest CSV file of mortgages 30 to 60 days delinquent by metro area"
                        href="{{ archive_30_60['MetroArea']['url'] }}">
                    CSV</a> ({{ archive_30_60['MetroArea']['size'] }})</p>
            </td>
            <td>
                <p><a aria-label="Download latest CSV file of mortgages 30 to 60 days delinquent by county"
                        href="{{ archive_30_60['County']['url'] }}">
                    CSV</a> ({{ archive_30_60['County']['size'] }})</p>
            </td>
        </tr>
        <tr>
            <td>
                <p>Mortgages 90 or more days delinquent</p>
            </td>
            <td>
                <p><a aria-label="Download latest CSV file of mortgages 90 or more days delinquent by state"
                    href="{{ archive_90['State']['url'] }}">
                CSV</a> ({{ archive_90['State']['size'] }})</p>
            </td>
            <td>
                <p><a aria-label="Download latest CSV file of mortgages 90 or more days delinquent by metro area"
                    href="{{ archive_90['MetroArea']['url'] }}">
                CSV</a> ({{ archive_90['MetroArea']['size'] }})</p>
            </td>
            <td>
                <p><a aria-label="Download latest CSV file of mortgages 90 or more days delinquent by county"
                    href="{{ archive_90['County']['url'] }}">
                CSV</a> ({{ archive_90['County']['size'] }})</p>
            </td>
        </tr>
    </tbody>
</table>
<p class="m-chart-footnote">Date published: {{ pub_date_formatted }}
</div>

{% if value.show_archives and archive_dates %}
<div class="o-full-width-text-group">
    <div class="m-full-width-text">
        <h2>Archived versions</h2>
        <p>Archived versions do not include later revisions.</p><br>
    </div>
</div>
{% for date in archive_dates %}
{% set archive_30_60 = download_files[date]['percent_30_60'] %}
{% set archive_90 = download_files[date]['percent_90'] %}
<div class="o-full-width-text-group">
    <div class="m-full-width-text">
      <h4> Download archival data {{ from_month_formatted }}{{ '&ndash;' | safe }}{{ download_files[date]['thru_month'] }}</h4>
    </div>
</div>
<div class="block block--flush-top">
<table class="o-table">
    <thead>
        <tr>
            <th scope="col">
                <p>Metric</p>
            </th>
            <th scope="col">
                <p>States</p>
            </th>
            <th scope="col" class="u-w20pct">
                <p>Metro and non-metro areas</p>
            </th>
            <th scope="col" class="u-w20pct">
                <p>Counties</p>
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                <p>Mortgages 30&ndash;89 days delinquent</p>
            </td>
            <td>
                <p><a aria-label="Download archival CSV file through {{ download_files[date]['thru_month'] }} of mortgages 30 to 60 days delinquent by state"
                    href="{{ archive_30_60['State']['url'] }}">
                CSV</a> ({{ archive_30_60['State']['size'] }})</p>
            </td>
            <td>
                <p><a aria-label="Download archival CSV file through {{ download_files[date]['thru_month'] }} of mortgages 30 to 60 days delinquent by metro area"
                    href="{{ archive_30_60['MetroArea']['url'] }}">
                CSV</a> ({{ archive_30_60['MetroArea']['size'] }})</p>
            </td>
            <td>
                <p><a aria-label="Download archival CSV file through {{ download_files[date]['thru_month'] }} of mortgages 30 to 60 days delinquent by county"
                    href="{{ archive_30_60['County']['url'] }}">
                CSV</a> ({{ archive_30_60['County']['size'] }})</p>
            </td>
        </tr>
        <tr>
            <td>
                <p>Mortgages 90 or more days delinquent</p>
            </td>
            <td>
                <p><a aria-label="Download archival CSV file through {{ download_files[date]['thru_month'] }} of mortgages 90 or more days delinquent by state"
                    href="{{ archive_90['State']['url'] }}">
                CSV</a> ({{ archive_90['State']['size'] }})</p>
            </td>
            <td>
                <p><a aria-label="Download archival CSV file through {{ download_files[date]['thru_month'] }} of mortgages 90 or more days delinquent by metro area"
                    href="{{ archive_90['MetroArea']['url'] }}">
                CSV</a> ({{ archive_90['MetroArea']['size'] }})</p>
            </td>
            <td>
                <p><a aria-label="Download archival CSV file through {{ download_files[date]['thru_month'] }} of mortgages 90 or more days delinquent by county"
                    href="{{ archive_90['County']['url'] }}">
                CSV</a> ({{ archive_90['County']['size'] }})</p>
            </td>
        </tr>
    </tbody>
</table>
<p class="m-chart-footnote">Date published: {{ download_files[date]['pub_date'] }}
</div>
{% endfor %}
{% endif %}
