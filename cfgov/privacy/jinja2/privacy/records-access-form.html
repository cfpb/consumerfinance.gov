{% extends 'layout-2-1-bleedbar.html' %}

{% set breadcrumb_items = [{
    "title": "CFPB Home",
    "href": "/",
}] %}

{% block title -%}
    Test Form | Consumer Financial Protection Bureau
{%- endblock %}

{% block desc -%}
    This is a test
{%- endblock %}

{% block og_desc -%}
    This is a test
{%- endblock %}

{% block content_main -%}
    <style>
      .m-form-grid {
        display: grid;
        grid-template-columns: 50% repeat(2, 1fr);
        grid-column-gap: 3em;
        padding-right: 1em;
      }
      .m-form-grid input {
        width: 100%;
      }
      .m-form-field__radio {
        line-height: 1.75em;
      }
      #mail-target {
        max-height: 0;
        transition: max-height 0.5s;
        overflow: hidden;
      }
      #mail-target.open {
        max-height: 235px;
      }
    </style>
    <div class="block block__flush-top">
        <h1>Test form</h1>
        <div class="lead-paragraph">
            <p>
            Testing file uploads from a form.
            </p>
        </div>
    </div>
    <div class="block">
        <form id="voluntary-diversity-assessment"
              action="{{ url('privacy:records_access') }}"
              enctype="multipart/form-data"
              method="POST">
            {#
                Display any error messages created during form submission.
                Rendered above the form for styling purposes.
            #}
            {% if form.errors %}
                {% import 'molecules/notification.html' as notification %}
                <div class="u-mb15">
                    {% for error in form.non_field_errors() %}
                        {{- notification.render( 'error', true, error | richtext ) }}
                    {% endfor %}
                    {% for field in form %}
                        {% for error in field.errors %}
                            {{- notification.render( 'error', true, error ) }}
                        {% endfor %}
                    {% endfor %}
                </div>
            {% endif %}

            <h2>Test form</h2>
            <div class="o-well u-mb30">
                <div class="o-form_group">
                    <div class="m-form-field">
                        <label class="a-label a-label__heading"
                               for="{{ form.description.id_for_label }}">
                            {{ form.description.label }}
                        </label>
                        {{ form.description }}
                    </div>
                </div>
                <div class="o-form_group">
                    <div class="m-form-field">
                        <label class="a-label a-label__heading"
                               for="{{ form.system_of_record.id_for_label }}">
                            {{ form.system_of_record.label }}
                        </label>
                        {{ form.system_of_record }}
                    </div>
                </div>
                <div class="o-form_group">
                    <div class="m-form-field">
                        <label class="a-label a-label__heading"
                               for="{{ form.date_of_records.id_for_label }}">
                            {{ form.date_of_records.label }}
                        </label>
		        <p class="help">{{ form.date_of_records.help_text }}</p>
                        {{ form.date_of_records }}
                    </div>
                </div>
                <div class="o-form_group">
                    <div class="m-form-field">
                        <label class="a-label a-label__heading"
                               for="{{ form.other_info.id_for_label }}">
                            {{ form.other_info.label }}
                        </label>
                        <p class="help">{{ form.other_info.help_text }}</p>
                        {{ form.other_info }}
                    </div>
                </div>
            </div>


            <div class="o-well u-mb30">
                <div class="o-form_group">
                    <div class="m-form-field">
                        <label class="a-label a-label__heading"
                               for="{{ form.requestor_name.id_for_label }}">
                            {{ form.requestor_name.label }}
                        </label>
                        {{ form.requestor_name }}
                    </div>
                </div>
                <div class="o-form_group">
                    <div class="m-form-field">
                        <label class="a-label a-label__heading"
                               for="{{ form.requestor_email.id_for_label }}">
                            {{ form.requestor_email.label }}
                        </label>
                        {{ form.requestor_email }}
                    </div>
                </div>
                  <div id="mail-radio" class="o-form_group">
                   {% for choice in form.contact_channel %}
                    <div class="m-form-field m-form-field__radio">
                      <input class="a-radio" {%if loop.index == 1%}checked{% else %}value="mail"{% endif %} name="contact_channel" type="radio" id="{{choice.id_for_label}}">
                        <label class="a-label" for="{{choice.id_for_label}}">{{choice.choice_label}}</label>
                     </div>
                   {% endfor %}
                  </div>
                <div id="mail-target">
                  <p>If you would like to receive your records by mail, please provide your mailing address.</p>
                  <div class="o-form_group">
                      <div class="m-form-field">
                          <label class="a-label a-label__heading"
                                 for="{{ form.street_address.id_for_label }}">
                              {{ form.street_address.label }}
                          </label>
                          {{ form.street_address }}
                      </div>
                  </div>
                  <div class="o-form_group m-form-grid">
                      <div class="m-form-field">
                          <label class="a-label a-label__heading"
                                 for="{{ form.city.id_for_label }}">
                              {{ form.city.label }}
                          </label>
                          {{ form.city }}
                      </div>
                      <div class="m-form-field">
                          <label class="a-label a-label__heading"
                                 for="{{ form.state.id_for_label }}">
                              {{ form.state.label }}
                          </label>
                          {{ form.state }}
                      </div>
                      <div class="m-form-field">
                          <label class="a-label a-label__heading"
                                 for="{{ form.zip_code.id_for_label }}">
                              {{ form.zip_code.label }}
                          </label>
                          {{ form.zip_code }}
                      </div>
                  </div>
                </div>
            </div>


            <div class="o-well u-mb30">
                <div class="o-form_group">
                  {% for error in form.supporting_documentation.errors %}
                      {{- notification.render( 'error', true, error ) }}
                  {% endfor %}
                  <h4 style="margin-bottom:0.25em">Select up to six files to attach</h4>
                  <p>Total file size must not exceed 6MB</p>
                  <div class="m-form-field m-form-field__file-input">
                      <!-- Actual hidden file upload component. -->
                      <label>
                          <input class="u-hidden" multiple type="file" name="supporting_documentation" id="supporting_documentation">
                      </label>
                      <!-- Styled faux overlay component. -->
                      <button class="a-btn
                                     a-btn__flush-right">
                          Select files to upload
                      </button>
                  </div>
                </div>
                <div id="upload-file-list">
                  <h4 class="u-hidden">Files added:</h4>
                  <ul class="m-list m-list__unstyled"></ul>
                </div>
            </div>

            <div class="o-well u-mb30">
                <div class="o-form_group">
                    <div class="m-form-field">
                        <label class="a-label a-label__heading"
                               for="{{ form.full_name.id_for_label }}">
                            {{ form.full_name.label }}
                        </label>
                        {{ form.full_name }}
                    </div>
                </div>
                <div class="o-form_group">
                    <div class="m-form-field m-form-field__checkbox">
                        {{ form.consent }}
                        <label class="a-label a-label__heading"
                               for="{{ form.consent.id_for_label }}">
                            {{ form.consent.label }}
                        </label>
                    </div>
                </div>
            </div>


            <div class="o-form_group">
                <div class="m-btn-group">
                    <input class="a-btn"
                           type="submit"
                           value="Submit">
                    <a class="a-btn a-btn__link a-btn__secondary"
                       href="{{ url('privacy:privacy_statement') }}"
                       rel="noopener noreferrer"
                       target="_blank">
                       Privacy Act statement
                    </a>
                </div>
            </div>
        </form>
    </div>
{%- endblock %}

{% block content_sidebar -%}
    {% include '_sidebar.html' %}
{%- endblock %}

{% block javascript %}
    {{ super() }}
    <script>
      if ( document.body.parentElement.className.indexOf( 'no-js' ) === -1 ) {
        !function() {
          var s = [
            '{{ static("/js/routes/on-demand/privacy-forms.js") }}'
          ];
          jsl(s);
        }();
      }
    </script>
{% endblock javascript %}
