{% extends 'v1/layouts/layout-1-3.html' %}

{% import 'v1/includes/molecules/pagination.html' as pagination with context %}

{% block css -%}
    {{ super() }}
    <link rel="stylesheet" href="{{ static('apps/ask-cfpb/css/main.css') }}">
{%- endblock css %}

{% block content_modifiers -%}
    {{ super() }} ask-cfpb-page ask-cfpb-page--see-all
{%- endblock %}

{% block content_main %}
    <h1>
      {{ page.title }}
    </h1>
    {% import 'v1/includes/molecules/translation-links.html' as translation_links with context %}
    {{ translation_links.render() }}
    {% if page.glossary_terms %}
        <dl class="terms" itemscope itemtype="https://schema.org/DefinedTermSet">
        {% for term in page.glossary_terms %}
            <div class="term {{'' if loop.index == 1 else 'block block--border-top block--padded-top'}}"
                 id="{{ term.anchor(page.language) }}"
                 itemscope
                 itemtype="https://schema.org/DefinedTerm">
                <dt class="term__name" itemprop="name">
                    {{ term.name(page.language) }}
                    <link itemprop="url" href="{{ page.full_url }}{{ page.category_slug }}/#{{ term.anchor(page.language) }}">
                </dt>
                <dd class="term__definition" itemprop="description">
                    {{ term.definition(page.language) | richtext }}
                    {% if term.answer_page_en -%}
                        <a class="term__link" href="{{ term.answer_page_url(page.language) }}">{{ _('Read more') }}</a>
                    {%- endif %}
                </dd>
            </div>
        {% endfor %}
        </dl>
    {% else %}
        {% if not page.portal_category %}
        <p class="lead-paragraph u-mt0">
            {{ page.overview }}
        </p>
        {% endif %}

        <section class="results">
            <div class="page-links">
            {% for page in pages %}
            <article>
                <div class="h3 hover"><a href="{{page.url}}" class="hover">{{page.autocomplete}}</a></div>
            </article>
            {% endfor %}

            <div class="block block--sub">
                {{ pagination.render( paginator.num_pages, current_page, '', 0 ) }}
            </div>
        </section>
        {% if not page.portal_category %}
        <div class="m-notification
            m-notification--visible
            m-notification--success">
            {{ svg_icon('help-round') }}
            <div class="m-notification__content">
                <div class="m-notification__message">{{ _('Can't find what you're looking for?') }}</div>
                <ul class="m-list m-list--links">
                    <li class="m-list__item">
                        <a class="a-link a-link--jump" href="{{ _('/search/') }}">
                            <span class="a-link__text">
                              {{ _('Search all of consumerfinance.gov') }}
                            </span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        {% endif %}
    {% endif %}
{% endblock %}
