{# ==========================================================================

   ask_search.render()

   ==========================================================================

   Description:

   Output an ask search bar when given:

   ask_query:      The previous search query string.

   language:       Page's language.

   show_label:     Boolean; whether to show form label.

   autocomplete:   Boolean; whether to allow autocomplete.

   placeholder:    String; text to enter for the search input's placeholder
                   value.

   is_subsection:  Boolean; whether to mark up the form label with an h3 to fit
                   into an exisitng section or with an h2 to be its own section

   max_length:     Integer; the maximum length of a query string, in characters

   ========================================================================== #}

{% macro render(
    ask_query='',
    language='en',
    show_label=True,
    autocomplete=True,
    placeholder='',
    is_subsection=True,
    max_length=autocomplete_max_chars
) %}
<div class="o-search-bar">
    <form method="get"
          action="{{ _('/ask-cfpb/search/') }}"
          data-cy="ask-search-form">
        {% if show_label %}
        <{{ 'h3' if is_subsection else 'h2' }}>
            {{ _('Search for your question') }}
        </{{ 'h3' if is_subsection else 'h2' }}>
        {% endif %}

<<<<<<< ans_search_input
        <div>
            {% import 'v1/includes/organisms/search-input.html' as search_input %}
            {% set placeholder_value = _('Search Ask CFPB for your question') %}
            {{ search_input.render({
                "input_aria_describedby_id": "o-search-bar_error-message",
                "input_id": "o-search-bar_query",
                "input_name": "q",
                "input_value": ask_query,
                "input_aria_label": _('Search for your question'),
                "has_autocomplete": autocomplete,
                "placeholder": placeholder_value,
                "submit_aria_label": placeholder_value
            }) }}

            <div class="u-mt15 a-form-alert a-form-alert--error u-hidden"
                 id="o-search-bar_error-message"
                 role="alert">
                {{ svg_icon('error-round') }}
                <p class="a-form-alert__text">
                    Searches are limited to {{ autocomplete_max_chars }}
                    characters.
                </p>
=======
        <div class="o-search-bar__input">
            <div class="o-form--input-w-btn">
                <div class="o-form--input-w-btn__input-container">
                    <div class="m-btn-inside-input
                                input-contains-label
                                {% if autocomplete %}m-autocomplete{% endif %}"
                         data-language="{{ language }}">
                        <label for="o-search-bar_query"
                               class="input-contains-label__before
                                      input-contains-label__before--search">
                            {{ svg_icon('search') }}
                            <span class="u-visually-hidden">
                                {{ _('Search for your question') }}
                            </span>
                        </label>
                        <input class="a-text-input"
                               type="text"
                               name="q"
                               id="o-search-bar_query"
                               value="{{ ask_query }}"
                               placeholder="{{ placeholder }}"
                               maxlength="{{ max_length }}"
                               aria-describedby="o-search-bar_error-message">
                    </div>
                    <div class="a-form-alert a-form-alert--error u-hidden"
                         id="o-search-bar_error-message"
                         role="alert">
                        {{ svg_icon('error-round') }}
                        <p class="a-form-alert__text">
                            Searches are limited to {{ autocomplete_max_chars }}
                            characters.
                        </p>
                    </div>
                </div>
                <div class="o-form--input-w-btn__btn-container">
                    <button class="a-btn"
                            type="submit"
                            aria-label="{{ _('Search Ask CFPB for your question') }}">
                        {{ _('Search') }}
                    </button>
                </div>
>>>>>>> main
            </div>
        </div>
    </form>
</div>
{% endmacro %}

{% if value %}
  {{ render(
      '',
      value.language | default( 'en' ),
      value.show_label | default( True ),
      value.autocomplete | default( True ),
      value.placeholder | default( '' ),
      value.is_subsection | default( True ),
      value.max_length | default( autocomplete_max_chars )
    )
  }}
{% endif %}
