{% extends 'wellbeing/base.html' %}

{% block css %}
    {{ super() }}
    <style>

    </style>
{% endblock %}

{% block content_main %}
    <h1>Your financial well-being score</h1>

    <p class="lead-paragraph">
        Well done! Youâ€™ve taken a good step in understanding your financial picture.
    </p>

    <div id="score-value">
        Score:
    </div>

    <div id="well-being-blurb"></div>
    <div id="score-graph"></div>
{% endblock %}

{% block javascript %}
    {{ super() }}

    <script>
    /* global $ */
    /* eslint no-extra-semi: "off" */
    'use strict';

    ( function() {

      if ( !location.pathname.match( '/results' ) ) {
        return;
      }

      var score = Number( location.search.slice( 1 ) );
      var average = 39;
      var high = 64;

      var resourcesByScore = [
        {
          graph: 'improvement.png',
          wellBeing: 'Could be improved'
        },
        {
          graph: 'average.png',
          wellBeing: 'Average'
        },
        {
          graph: 'high.png',
          wellBeing: 'High'
        }
      ];

      var imgPath = window.location.pathname.replace( 'results.html', '' ) +
        'static/img/';

      function getResourcesByScore() {
        if ( score < average ) return resourcesByScore[0];
        if ( score < high ) return resourcesByScore[1];
        return resourcesByScore[2];
      }

      function loadResources( resources ) {
        var scoreDisplay = document.querySelector( '#score-value' );
        var blurb = document.querySelector( '#well-being-blurb' );
        var graph = document.querySelector( '#score-graph' );

        scoreDisplay.textContent = scoreDisplay.textContent + ' ' + score;
        blurb.textContent = blurb.textContent + ' ' + resources.wellBeing;
        graph.setAttribute( 'src', imgPath + resources.graph );
      }

      // $( document ).ready( function() {
      //   var score = Number( location.search.slice( 1 ) );
      //   loadResources( score, getResourcesByScore( score ) );
      // } );

      loadResources( getResourcesByScore() );

    } )();

    </script>
{% endblock %}
